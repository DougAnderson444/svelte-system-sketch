{"version":3,"file":"_page.svelte-3424e974.js","sources":["../../../../../../../node_modules/nanoid/non-secure/index.js","../../../../../../../src/lib/utils/index.ts","../../../../../../../node_modules/@douganderson444/pointer-tracker/dist/PointerTracker.mjs","../../../../../../../src/lib/stores.js","../../../../../../../src/lib/ResizeHandle.svelte","../../../../../../../src/lib/directives.js","../../../../../../../src/lib/EditableText.svelte","../../../../../../../src/lib/config/index.js","../../../../../../../src/lib/ColorPicker.svelte","../../../../../../../src/lib/ContextMenu.svelte","../../../../../../../src/lib/SVG/thumbtack.svelte","../../../../../../../src/lib/Container.svelte","../../../../../../../src/lib/Menu.svelte","../../../../../../../node_modules/@douganderson444/panzoom-node/node_modules/@douganderson444/pointer-tracker/dist/PointerTracker.mjs","../../../../../../../node_modules/@douganderson444/panzoom-node/pinchZoom.js","../../../../../../../node_modules/@douganderson444/panzoom-node/pzoom.js","../../../../../../../src/lib/Sketch.svelte","../../../../../../../src/lib/App.svelte","../../../../../../../src/routes/+page.svelte"],"sourcesContent":["let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nlet nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nexport { nanoid, customAlphabet }\n","import { nanoid } from 'nanoid';\r\nimport { customAlphabet } from 'nanoid/non-secure';\r\n\r\nexport function safeid(n: number = 16): string {\r\n\treturn customAlphabet('abcdefghijklmnopqrztuvwxyz1234567890', n)();\r\n}\r\n\r\nexport default safeid;\r\n\r\nexport function createNewNode(params: type) {\r\n\t// create a new node object with params if available, if not make defaults\r\n\tconst newNode = {\r\n\t\tname: 'Name',\r\n\t\tid: safeid(),\r\n\t\tx: 10,\r\n\t\ty: 10,\r\n\t\tstyle: {\r\n\t\t\tbackgroundColor: '#fee9004b',\r\n\t\t\twidth: 120,\r\n\t\t\theight: 120,\r\n\t\t\tleft: 10,\r\n\t\t\ttop: 10\r\n\t\t},\r\n\t\t// component: DragHandles,\r\n\t\tprops: [],\r\n\t\tchildren: [],\r\n\t\t...params\r\n\t};\r\n\r\n\treturn newNode;\r\n}\r\n","class Pointer {\r\n    constructor(nativePointer) {\r\n        /** Unique ID for this pointer */\r\n        this.id = -1;\r\n        this.nativePointer = nativePointer;\r\n        this.pageX = nativePointer.pageX;\r\n        this.pageY = nativePointer.pageY;\r\n        this.clientX = nativePointer.clientX;\r\n        this.clientY = nativePointer.clientY;\r\n        if (self.Touch && nativePointer instanceof Touch) {\r\n            this.id = nativePointer.identifier;\r\n        }\r\n        else if (isPointerEvent(nativePointer)) {\r\n            // is PointerEvent\r\n            this.id = nativePointer.pointerId;\r\n        }\r\n    }\r\n    /**\r\n     * Returns an expanded set of Pointers for high-resolution inputs.\r\n     */\r\n    getCoalesced() {\r\n        if ('getCoalescedEvents' in this.nativePointer) {\r\n            const events = this.nativePointer\r\n                .getCoalescedEvents()\r\n                .map((p) => new Pointer(p));\r\n            // Firefox sometimes returns an empty list here. I'm not sure it's doing the right thing.\r\n            // https://github.com/w3c/pointerevents/issues/409\r\n            if (events.length > 0)\r\n                return events;\r\n            // Otherwise, Firefox falls through‚Ä¶\r\n        }\r\n        return [this];\r\n    }\r\n}\r\nconst isPointerEvent = (event) => 'pointerId' in event;\r\nconst isTouchEvent = (event) => 'changedTouches' in event;\r\nconst noop = () => { };\r\n/**\r\n * Track pointers across a particular element\r\n */\r\nclass PointerTracker {\r\n    /**\r\n     * Track pointers across a particular element\r\n     *\r\n     * @param element Element to monitor.\r\n     * @param options\r\n     */\r\n    constructor(_element, { start = () => true, move = noop, end = noop, rawUpdates = false, avoidPointerEvents = false, eventListenerOptions = { capture: false, passive: false, once: false }, } = {}) {\r\n        this._element = _element;\r\n        /**\r\n         * State of the tracked pointers when they were pressed/touched.\r\n         */\r\n        this.startPointers = [];\r\n        /**\r\n         * Latest state of the tracked pointers. Contains the same number of pointers, and in the same\r\n         * order as this.startPointers.\r\n         */\r\n        this.currentPointers = [];\r\n        /**\r\n         * Firefox has a bug where touch-based pointer events have a `buttons` of 0, when this shouldn't\r\n         * happen. https://bugzilla.mozilla.org/show_bug.cgi?id=1729440\r\n         *\r\n         * Usually we treat `buttons === 0` as no-longer-pressed. This set allows us to exclude these\r\n         * buggy Firefox events.\r\n         */\r\n        this._excludeFromButtonsCheck = new Set();\r\n        /**\r\n         * Listener for mouse/pointer starts.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerStart = (event) => {\r\n            if (isPointerEvent(event) && event.buttons === 0) {\r\n                // This is the buggy Firefox case. See _excludeFromButtonsCheck.\r\n                this._excludeFromButtonsCheck.add(event.pointerId);\r\n            }\r\n            else if (!(event.buttons & 1 /* LeftMouseOrTouchOrPenDown */)) {\r\n                return;\r\n            }\r\n            const pointer = new Pointer(event);\r\n            // If we're already tracking this pointer, ignore this event.\r\n            // This happens with mouse events when multiple buttons are pressed.\r\n            if (this.currentPointers.some((p) => p.id === pointer.id))\r\n                return;\r\n            if (!this._triggerPointerStart(pointer, event))\r\n                return;\r\n            // Add listeners for additional events.\r\n            // The listeners may already exist, but no harm in adding them again.\r\n            if (isPointerEvent(event)) {\r\n                const capturingElement = event.target && 'setPointerCapture' in event.target\r\n                    ? event.target\r\n                    : this._element;\r\n                capturingElement.setPointerCapture(event.pointerId);\r\n                this._element.addEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move, this._eventListenerOptions);\r\n                this._element.addEventListener('pointerup', this._pointerEnd, this._eventListenerOptions);\r\n                this._element.addEventListener('pointercancel', this._pointerEnd, this._eventListenerOptions);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.addEventListener('mousemove', this._move);\r\n                window.addEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchstart.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchStart = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerStart(new Pointer(touch), event);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for pointer/mouse/touch move events.\r\n         */\r\n        this._move = (event) => {\r\n            if (!isTouchEvent(event) &&\r\n                (!isPointerEvent(event) ||\r\n                    !this._excludeFromButtonsCheck.has(event.pointerId)) &&\r\n                event.buttons === 0 /* None */) {\r\n                // This happens in a number of buggy cases where the browser failed to deliver a pointerup\r\n                // or pointercancel. If we see the pointer moving without any buttons down, synthesize an end.\r\n                // https://github.com/w3c/pointerevents/issues/407\r\n                // https://github.com/w3c/pointerevents/issues/408\r\n                this._pointerEnd(event);\r\n                return;\r\n            }\r\n            const previousPointers = this.currentPointers.slice();\r\n            const changedPointers = isTouchEvent(event)\r\n                ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n                : [new Pointer(event)];\r\n            const trackedChangedPointers = [];\r\n            for (const pointer of changedPointers) {\r\n                const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n                if (index === -1)\r\n                    continue; // Not a pointer we're tracking\r\n                trackedChangedPointers.push(pointer);\r\n                this.currentPointers[index] = pointer;\r\n            }\r\n            if (trackedChangedPointers.length === 0)\r\n                return;\r\n            this._moveCallback(previousPointers, trackedChangedPointers, event);\r\n        };\r\n        /**\r\n         * Call the end callback for this pointer.\r\n         *\r\n         * @param pointer Pointer\r\n         * @param event Related event\r\n         */\r\n        this._triggerPointerEnd = (pointer, event) => {\r\n            // Main button still down?\r\n            // With mouse events, you get a mouseup per mouse button, so the left button might still be down.\r\n            if (!isTouchEvent(event) &&\r\n                event.buttons & 1 /* LeftMouseOrTouchOrPenDown */) {\r\n                return false;\r\n            }\r\n            const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n            // Not a pointer we're interested in?\r\n            if (index === -1)\r\n                return false;\r\n            this.currentPointers.splice(index, 1);\r\n            this.startPointers.splice(index, 1);\r\n            this._excludeFromButtonsCheck.delete(pointer.id);\r\n            // The event.type might be a 'move' event due to workarounds for weird mouse behaviour.\r\n            // See _move for details.\r\n            const cancelled = !(event.type === 'mouseup' ||\r\n                event.type === 'touchend' ||\r\n                event.type === 'pointerup');\r\n            this._endCallback(pointer, event, cancelled);\r\n            return true;\r\n        };\r\n        /**\r\n         * Listener for mouse/pointer ends.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerEnd = (event) => {\r\n            if (!this._triggerPointerEnd(new Pointer(event), event))\r\n                return;\r\n            if (isPointerEvent(event)) {\r\n                if (this.currentPointers.length)\r\n                    return;\r\n                this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n                this._element.removeEventListener('pointerup', this._pointerEnd);\r\n                this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.removeEventListener('mousemove', this._move);\r\n                window.removeEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchend.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchEnd = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerEnd(new Pointer(touch), event);\r\n            }\r\n        };\r\n        this._startCallback = start;\r\n        this._moveCallback = move;\r\n        this._endCallback = end;\r\n        this._rawUpdates = rawUpdates && 'onpointerrawupdate' in window;\r\n        this._eventListenerOptions = eventListenerOptions;\r\n        // Add listeners\r\n        if (self.PointerEvent && !avoidPointerEvents) {\r\n            this._element.addEventListener('pointerdown', this._pointerStart, this._eventListenerOptions);\r\n        }\r\n        else {\r\n            this._element.addEventListener('mousedown', this._pointerStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchstart', this._touchStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchmove', this._move, this._eventListenerOptions);\r\n            this._element.addEventListener('touchend', this._touchEnd, this._eventListenerOptions);\r\n            this._element.addEventListener('touchcancel', this._touchEnd, this._eventListenerOptions);\r\n        }\r\n    }\r\n    /**\r\n     * Remove all listeners.\r\n     */\r\n    stop() {\r\n        this._element.removeEventListener('pointerdown', this._pointerStart);\r\n        this._element.removeEventListener('mousedown', this._pointerStart);\r\n        this._element.removeEventListener('touchstart', this._touchStart);\r\n        this._element.removeEventListener('touchmove', this._move);\r\n        this._element.removeEventListener('touchend', this._touchEnd);\r\n        this._element.removeEventListener('touchcancel', this._touchEnd);\r\n        this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n        this._element.removeEventListener('pointerup', this._pointerEnd);\r\n        this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n        window.removeEventListener('mousemove', this._move);\r\n        window.removeEventListener('mouseup', this._pointerEnd);\r\n    }\r\n    /**\r\n     * Call the start callback for this pointer, and track it if the user wants.\r\n     *\r\n     * @param pointer Pointer\r\n     * @param event Related event\r\n     * @returns Whether the pointer is being tracked.\r\n     */\r\n    _triggerPointerStart(pointer, event) {\r\n        if (!this._startCallback(pointer, event))\r\n            return false;\r\n        this.currentPointers.push(pointer);\r\n        this.startPointers.push(pointer);\r\n        return true;\r\n    }\r\n}\n\nexport { PointerTracker as default };\n","import { writable } from 'svelte/store';\r\n\r\nexport const scale = writable({ value: 1 });\r\nexport const selected = writable(null);\r\n","<script lang=\"ts\">\r\n\timport PointerTracker from '@douganderson444/pointer-tracker';\r\n\timport { onMount } from 'svelte';\r\n\r\n\timport { scale } from './stores.js';\r\n\r\n\texport let x;\r\n\texport let y;\r\n\texport let width;\r\n\texport let height;\r\n\r\n\texport let maxFrameHeight = 2500;\r\n\texport let maxFrameWidth = 2500;\r\n\texport let minFrameHeight = 40;\r\n\texport let minFrameWidth = 40;\r\n\r\n\texport let arenaWidth;\r\n\texport let arenaHeight;\r\n\r\n\texport let direction;\r\n\texport let isDragging = false;\r\n\r\n\texport let grid;\r\n\r\n\tconst isPointerEvent = (event: any): event is PointerEvent => 'pointerId' in event;\r\n\r\n\tlet handleEl;\r\n\tlet size = '4em';\r\n\r\n\t$: handleWidth = handleEl ? handleEl.getClientRects()[0].height : 8;\r\n\t$: handleHeight = handleEl ? handleEl.getClientRects()[0].width : 8;\r\n\r\n\t$: left = handleX(direction, x, width, handleWidth);\r\n\t$: top = handleY(direction, y, height, handleHeight);\r\n\r\n\tonMount(() => {\r\n\t\t// ask the browser what the px size is based on the --size in em\r\n\r\n\t\t// Watch for pointers\r\n\t\tconst pointerTracker = new PointerTracker(handleEl, {\r\n\t\t\tstart: (pointer, event) => {\r\n\t\t\t\t// We only want to track 2 pointers at most\r\n\r\n\t\t\t\tif (pointerTracker.currentPointers.length === 2) return false;\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tmove: (previousPointers, changedPointers, event) => {\r\n\t\t\t\tif (!isPointerEvent(event)) return;\r\n\t\t\t\tlet dx = event.clientX - previousPointers[0].clientX;\r\n\t\t\t\tlet dy = event.clientY - previousPointers[0].clientY;\r\n\t\t\t\tdragHandle(event.clientX, event.clientY, dx, dy);\r\n\t\t\t},\r\n\t\t\tend: (pointer, event, cancelled) => {\r\n\t\t\t\tonDragEnd();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tlet cursor =\r\n\t\tdirection == 'nw' || direction == 'se'\r\n\t\t\t? 'nwse-resize'\r\n\t\t\t: direction == 'n' || direction == 's'\r\n\t\t\t? 'ns-resize'\r\n\t\t\t: direction == 'ne' || direction == 'sw'\r\n\t\t\t? 'nesw-resize'\r\n\t\t\t: 'ew-resize';\r\n\r\n\t// handle positions\r\n\tfunction handleX(direction, x, width, handleWidth) {\r\n\t\t// extra arguments for reactivity\r\n\t\tswitch (direction) {\r\n\t\t\tcase 'nw':\r\n\t\t\tcase 'w':\r\n\t\t\tcase 'sw':\r\n\t\t\t\treturn x - handleWidth / 2; // x - handleWidth;\r\n\t\t\tcase 'n':\r\n\t\t\tcase 's':\r\n\t\t\t\treturn x + width / 2;\r\n\t\t\tcase 'ne':\r\n\t\t\tcase 'e':\r\n\t\t\tcase 'se':\r\n\t\t\t\treturn x + width;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleY(direction, y, height, handleHeight) {\r\n\t\tswitch (direction) {\r\n\t\t\tcase 'nw':\r\n\t\t\tcase 'n':\r\n\t\t\tcase 'ne':\r\n\t\t\t\treturn y - handleHeight / 2;\r\n\t\t\tcase 'e':\r\n\t\t\tcase 'w':\r\n\t\t\t\treturn y + height / 2 - handleHeight / 2;\r\n\t\t\tcase 'sw':\r\n\t\t\tcase 's':\r\n\t\t\tcase 'se':\r\n\t\t\t\treturn y + height;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction dragHandle(_x, _y, dx, dy) {\r\n\t\tswitch (direction) {\r\n\t\t\tcase 'nw':\r\n\t\t\tcase 'w':\r\n\t\t\tcase 'sw':\r\n\t\t\t\tx = Math.max(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tx + width - maxFrameWidth,\r\n\t\t\t\t\tMath.min(x + width - minFrameWidth, arenaWidth, x + dx / $scale.value)\r\n\t\t\t\t);\r\n\t\t\t\twidth = width - dx / $scale.value;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ne':\r\n\t\t\tcase 'e':\r\n\t\t\tcase 'se':\r\n\t\t\t\twidth =\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tx + minFrameWidth,\r\n\t\t\t\t\t\tMath.min(x + maxFrameWidth, arenaWidth, x + width + dx / $scale.value)\r\n\t\t\t\t\t) - x;\r\n\t\t}\r\n\r\n\t\tswitch (direction) {\r\n\t\t\tcase 'nw':\r\n\t\t\tcase 'n':\r\n\t\t\tcase 'ne':\r\n\t\t\t\ty = Math.max(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\ty + height - maxFrameHeight,\r\n\t\t\t\t\tMath.min(y + height - minFrameHeight, arenaHeight, y + dy / $scale.value)\r\n\t\t\t\t);\r\n\t\t\t\theight = height - dy / $scale.value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'sw':\r\n\t\t\tcase 's':\r\n\t\t\tcase 'se':\r\n\t\t\t\theight =\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\ty + minFrameHeight,\r\n\t\t\t\t\t\tMath.min(y + maxFrameHeight, arenaHeight, y + height + dy / $scale.value)\r\n\t\t\t\t\t) - y;\r\n\t\t}\r\n\t}\r\n\tfunction onDragEnd() {\r\n\t\tisDragging = false;\r\n\t\tif (grid) {\r\n\t\t\tx = Math.floor(x / grid) * grid;\r\n\t\t\ty = Math.floor(y / grid) * grid;\r\n\t\t\twidth = Math.floor(width / grid) * grid;\r\n\t\t\theight = Math.floor(height / grid) * grid;\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div\r\n\tbind:this={handleEl}\r\n\tclass=\"resize-handle {direction}\"\r\n\tstyle=\"--size: {size}; left:{left}px; top:{top}px; cursor: {cursor};\"\r\n>\r\n\t<div class=\"resize-handle-decoration {direction}\" />\r\n</div>\r\n\r\n<style>\r\n\t:root {\r\n\t\t--color: rgba(121, 121, 121, 0.5);\r\n\t}\r\n\t.resize-handle-decoration {\r\n\t\theight: calc(var(--size) / 2);\r\n\t\twidth: calc(var(--size) / 2);\r\n\t}\r\n\t.resize-handle-decoration.nw {\r\n\t\tborder-left: 0.25em solid var(--color);\r\n\t\tborder-top: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.w {\r\n\t\tborder-left: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.sw {\r\n\t\tborder-left: 0.25em solid var(--color);\r\n\t\tborder-bottom: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.ne {\r\n\t\tborder-top: 0.25em solid var(--color);\r\n\t\tborder-right: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.e {\r\n\t\tborder-right: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.se {\r\n\t\tborder-right: 0.25em solid var(--color);\r\n\t\tborder-bottom: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.n {\r\n\t\tborder-top: 0.25em solid var(--color);\r\n\t}\r\n\t.resize-handle-decoration.s {\r\n\t\tborder-bottom: 0.25em solid var(--color);\r\n\t}\r\n\r\n\t.resize-handle {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tposition: absolute;\r\n\t\twidth: var(--size);\r\n\t\theight: var(--size);\r\n\t\t/* margin: var(--size);\r\n\t\tpadding: var(--size); */\r\n\t\t/* border: solid 1px rgba(200, 200, 200, 0.1); */\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: rgb(255, 255, 255, 0.1);\r\n\t}\r\n</style>\r\n","export function clickOutside(node, { enabled: initialEnabled, handleUnselect }) {\r\n\tconst handleOutsideClick = ({ target }) => {\r\n\t\tif (node !== target && node.parentElement != target.parentElement && !node.contains(target)) {\r\n\t\t\thandleUnselect();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction update({ enabled }) {\r\n\t\tif (enabled) {\r\n\t\t\twindow.addEventListener('click', handleOutsideClick);\r\n\t\t} else {\r\n\t\t\twindow.removeEventListener('click', handleOutsideClick);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate({ enabled: initialEnabled });\r\n\treturn {\r\n\t\tupdate,\r\n\t\tdestroy() {\r\n\t\t\twindow.removeEventListener('click', handleOutsideClick);\r\n\t\t}\r\n\t};\r\n}\r\n","<script>\r\n\timport { createEventDispatcher } from 'svelte';\r\n\timport { tick } from 'svelte';\r\n\timport { clickOutside } from './directives';\r\n\r\n\t// Props\r\n\texport let value = '';\r\n\texport let type = 'text';\r\n\texport let placeholder = '';\r\n\texport let labelClasses = '';\r\n\r\n\tlet offsetWidth;\r\n\tlet editing = false;\r\n\tlet inputEl;\r\n\tlet label = value; // init\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tasync function toggle(event) {\r\n\t\tediting = !editing;\r\n\t\tconsole.log(`editing toggled to ${editing}`);\r\n\t\tif (editing) {\r\n\t\t\tawait tick();\r\n\t\t\tinputEl.focus();\r\n\t\t} else {\r\n\t\t\tstopEditing();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stopEditing() {\r\n\t\tediting = false;\r\n\t\tvalue = label; // finalize, save to db\r\n\t\tdispatch('doneEditing');\r\n\t}\r\n\r\n\tconst handleEnter = (e) => {\r\n\t\tif (e.keyCode === 13) {\r\n\t\t\te.preventDefault();\r\n\t\t\tinputEl.blur();\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleBlur = (_) => {\r\n\t\tif (value != '' && value != null) toggle();\r\n\t\telse value = 'Enter Value';\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\t// Chrome\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\t// Firefox\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if (document.selection) {\r\n\t\t\t// IE?\r\n\t\t\tdocument.selection.empty();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction handleInput(e) {\r\n\t\tinputEl.setAttribute('data-heading', inputEl.innerText);\r\n\t}\r\n\r\n\tfunction handleUnselect(e) {\r\n\t\tif (document.activeElement === inputEl) inputEl.blur();\r\n\t}\r\n</script>\r\n\r\n<div\r\n\tcontenteditable\r\n\tclass={labelClasses}\r\n\ton:keydown={handleEnter}\r\n\ton:blur={handleBlur}\r\n\tbind:this={inputEl}\r\n\tbind:innerHTML={label}\r\n\ton:click={toggle}\r\n\tuse:clickOutside={{ enabled: editing, handleUnselect }}\r\n/>\r\n\r\n<style>\r\n\tdiv {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t}\r\n</style>\r\n","export const colors = [\r\n\t'#63B75A4B',\r\n\t'#FEE9004B',\r\n\t'#ff003b4b',\r\n\t'#69f5dc4B',\r\n\t'#FF9D484B',\r\n\t'#7a00ff4B',\r\n\t'#ff14f84b',\r\n\t'#376bff4b'\r\n];\r\n","<script>\r\n\timport { colors } from '$lib/config';\r\n\texport let backgroundColor = '#fee9004b';\r\n</script>\r\n\r\n<main>\r\n\t{#if backgroundColor && colors}\r\n\t\t{#each colors as color, c}\r\n\t\t\t<div\r\n\t\t\t\tclass=\"colorOption\"\r\n\t\t\t\ton:click={(e) => (backgroundColor = color)}\r\n\t\t\t\tstyle=\"background-color: {color};\"\r\n\t\t\t>\r\n\t\t\t\t<!-- I get thisstrange error when using <div/> instead of <div> </div> -->\r\n\t\t\t\t&nbsp; &NonBreakingSpace;\r\n\t\t\t</div>\r\n\t\t{/each}\r\n\t{/if}\r\n</main>\r\n\r\n<style>\r\n\t.colorOption {\r\n\t\theight: 2em;\r\n\t\twidth: 2em;\r\n\t}\r\n\tmain {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-start;\r\n\t\theight: 8em;\r\n\t\tbackground-color: var(--bgColor);\r\n\t\tz-index: 99;\r\n\t\tflex-direction: column;\r\n\t\tflex-wrap: wrap;\r\n\t\talign-content: flex-start;\r\n\t}\r\n</style>\r\n","<script>\r\n\timport ColorPicker from './ColorPicker.svelte';\r\n\r\n\texport let node;\r\n\r\n\tlet offsetWidth;\r\n\t// let backgroundColor = node?.style?.backgroundColor || '#fee9004b';\r\n\r\n\t// console.log({ backgroundColor, node });\r\n\r\n\t// $: if (node && backgroundColor)\r\n\t// \tnode = {\r\n\t// \t\t...node,\r\n\t// \t\tstyle: {\r\n\t// \t\t\t...node.style,\r\n\t// \t\t\tbackgroundColor\r\n\t// \t\t}\r\n\t// \t};\r\n\r\n\tfunction handleDelete(e) {\r\n\t\t// TODO: tentatively delete it, with an undo snackbar\r\n\t}\r\n\r\n\tfunction handleConnect(e) {\r\n\t\t// TODO make connection\r\n\t}\r\n</script>\r\n\r\n<div class=\"context-menu\" style=\"right: -{offsetWidth * 3.25}px; top: 0;\" bind:offsetWidth>\r\n\t{#if node && node?.style?.backgroundColor && ColorPicker}\r\n\t\t<!-- <ColorPicker bind:backgroundColor /> -->\r\n\t\t<ColorPicker bind:backgroundColor={node.style.backgroundColor} />\r\n\t{/if}\r\n\t<span on:click|stopPropagation={handleConnect} class=\"connect\">‚Ü™</span>\r\n\t<span on:click|stopPropagation={handleDelete}>üóëÔ∏è</span>\r\n</div>\r\n\r\n<style>\r\n\t.context-menu {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\twidth: fit-content;\r\n\t\tmargin-left: 2em;\r\n\t\tz-index: 99;\r\n\t}\r\n\t.connect {\r\n\t\t--s: 0.05em;\r\n\t\tdisplay: block;\r\n\t\tfont-size: 1.7em;\r\n\t\ttransform: rotate(328deg) scale(1, -1);\r\n\t\ttext-shadow: calc(var(--s) * -0.5) calc(var(--s) * -1) calc(var(--s) * 1.25) #ccc;\r\n\t}\r\n\r\n\t.context-menu:hover,\r\n\t.context-menu:before {\r\n\t\tcursor: pointer;\r\n\t}\r\n\tspan:before {\r\n\t\t/* content: 'üóëÔ∏è'; */\r\n\t}\r\n</style>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tviewBox=\"0 0 384 512\"\r\n\tstroke=\"currentColor\"\r\n\tfill=\"currentColor\"\r\n>\r\n\t<path\r\n\t\td=\"M32 32C32 14 46 0 64 0h256a32 32 0 1 1 0 64h-29l11 148c37 20 66 53 79 95l1 3c4 10 2 20-4 29s-16 13-26 13H32a32 32 0 0 1-30-42l1-3c13-42 42-75 79-95L94 64H64c-18 0-32-14-32-32zm128 352h64v96a32 32 0 1 1-64 0v-96z\"\r\n\t/>\r\n</svg>\r\n","<script>\r\n\timport { createEventDispatcher, onMount } from 'svelte';\r\n\timport PointerTracker from '@douganderson444/pointer-tracker';\r\n\r\n\timport ResizeHandle from './ResizeHandle.svelte';\r\n\timport { scale, selected } from './stores.js';\r\n\timport { clickOutside } from './directives';\r\n\timport EditableText from './EditableText.svelte';\r\n\timport ContextMenu from './ContextMenu.svelte';\r\n\timport Thumbtack from './SVG/thumbtack.svelte';\r\n\r\n\t// export let data;\r\n\texport let node;\r\n\texport let arenaHeight;\r\n\texport let arenaWidth;\r\n\texport let isDragging = false;\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\t// redraw if arena changes/updates\r\n\t$: if (arenaWidth || arenaHeight) assertArenaBounds();\r\n\r\n\tlet nodeEl;\r\n\tlet clientWidth, clientHeight;\r\n\r\n\tlet grid = 20;\r\n\tlet minFrameWidth = 40;\r\n\tlet maxFrameWidth = 2500;\r\n\tlet minFrameHeight = 20;\r\n\tlet maxFrameHeight = 2500;\r\n\r\n\t// how much smaller are nested containers from the parent?\r\n\tlet fontSize = '0.8em';\r\n\r\n\tlet isFocused;\r\n\tlet directions = ['nw', 'w', 'sw', 'ne', 'e', 'se', 'n', 's'];\r\n\tlet pointerTracker;\r\n\tlet shiftX;\r\n\tlet shiftY;\r\n\r\n\tonMount(async () => {\r\n\t\t// Watch for pointers\r\n\t\tpointerTracker = new PointerTracker(nodeEl, {\r\n\t\t\tstart: (pointer, event) => {\r\n\t\t\t\t// console.log('Container click', node.name);\r\n\r\n\t\t\t\t// ignore single pointers on input / editable elements\r\n\t\t\t\tif (\r\n\t\t\t\t\tpointerTracker.currentPointers.length === 0 &&\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t(event.target instanceof HTMLInputElement || event.target.isContentEditable)\r\n\t\t\t\t) {\r\n\t\t\t\t\tconsole.log('single pointers on input / editable element');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ignore any target not the child of a [data-gripper]\r\n\t\t\t\tif (!event.target.closest('[data-gripper]')) {\r\n\t\t\t\t\tconsole.log('ignore any target not the child of a [data-gripper]');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// We only want to track 1 pointers at most (zooming is handled by pzoom for us)\r\n\t\t\t\t// if there already exists 1 pointer, and now this would have been the 2nd pointer, stop here\r\n\t\t\t\tif (pointerTracker.currentPointers.length === 1) return false;\r\n\r\n\t\t\t\tevent.stopPropagation(); // otherwise it will move the other containers too\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// capture the inital pointer offset within the event target\r\n\t\t\t\tshiftX = event.clientX - nodeEl.getBoundingClientRect().left || 0;\r\n\t\t\t\tshiftY = event.clientY - nodeEl.getBoundingClientRect().top || 0;\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tmove: (previousPointers, changedPointers, event) => {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet dx = event.clientX - previousPointers[0].clientX;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet dy = event.clientY - previousPointers[0].clientY;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tdragFrame(event.clientX, event.clientY, dx, dy);\r\n\t\t\t},\r\n\t\t\tend: (pointer, event, cancelled) => {\r\n\t\t\t\tonDragEnd(pointer);\r\n\t\t\t\thandleFocus(event);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t/**** event handling ***/\r\n\tfunction handleDragStart(e) {\r\n\t\tconsole.log('Drag started');\r\n\t\te.preventDefault();\r\n\t}\r\n\r\n\tfunction onDragStart() {\r\n\t\treturn { x: node.x, y: node.y };\r\n\t}\r\n\tfunction dragFrame(_x, _y, dx, dy) {\r\n\t\tnode.x = node.x + dx / $scale.value;\r\n\t\tnode.y = node.y + dy / $scale.value;\r\n\t\tassertArenaBounds();\r\n\t}\r\n\r\n\tfunction onDragEnd(pointer) {\r\n\t\tisDragging = false;\r\n\r\n\t\t// temporarily reset to original position so you can get elementFromPoint underneath it\r\n\t\tnodeEl.style.left = 0;\r\n\t\tnodeEl.style.top = 0;\r\n\r\n\t\tlet drop = document.elementFromPoint(pointer.clientX, pointer.clientY);\r\n\t\tlet zone = drop.closest('[data-dropzone]');\r\n\r\n\t\tif (\r\n\t\t\tzone &&\r\n\t\t\tzone !== nodeEl &&\r\n\t\t\t!nodeEl.contains(zone) &&\r\n\t\t\tzone?.id !== nodeEl.parentNode.closest('[data-dropzone]')?.id // also not self\r\n\t\t) {\r\n\t\t\t// add to new zone\r\n\t\t\tzone.dispatchEvent(\r\n\t\t\t\tnew CustomEvent('end', {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tnodeData: {\r\n\t\t\t\t\t\t\t...node,\r\n\t\t\t\t\t\t\tx: pointer.clientX - shiftX - zone.getBoundingClientRect().left,\r\n\t\t\t\t\t\t\ty: pointer.clientY - shiftY - zone.getBoundingClientRect().top\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\t// remove form this node\r\n\t\t\tremoveNode();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnode.x = Math.round(node.x / grid) * grid;\r\n\t\tnode.y = Math.round(node.y / grid) * grid;\r\n\t\tnode.style.width = Math.round(node.style.width / grid) * grid;\r\n\t\tnode.style.height = Math.round(node.style.height / grid) * grid;\r\n\t}\r\n\r\n\tfunction assertArenaBounds() {\r\n\t\tif (node.x < 0) {\r\n\t\t\tnode.x = 0;\r\n\t\t}\r\n\t\tif (node.x + node.style.width >= arenaWidth) {\r\n\t\t\tnode.x -= node.x + node.style.width - arenaWidth;\r\n\t\t}\r\n\r\n\t\tif (node.y < 0) {\r\n\t\t\tnode.y = 0;\r\n\t\t}\r\n\t\tif (node.y + node.style.height >= arenaHeight) {\r\n\t\t\tnode.y -= node.y + node.style.height - arenaHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t$: if ($selected != nodeEl) handleUnselect();\r\n\r\n\tfunction handleUnselect() {\r\n\t\tisFocused = false;\r\n\t}\r\n\tfunction handleFocus(e) {\r\n\t\tnodeEl.focus();\r\n\t\t$selected = nodeEl;\r\n\t\tisFocused = true;\r\n\t}\r\n\tfunction removeNode() {\r\n\t\t// remove node is from parent's children array\r\n\t\tnode = null; // delete node // not allowed in strict mode\r\n\t\tdispatch('drop'); // trigger refresh in parent\r\n\t}\r\n\r\n\tfunction handleEnd(e) {\r\n\t\tconst n = e.detail;\r\n\t\tnode = {\r\n\t\t\t...node,\r\n\t\t\tchildren: [...node.children, n.nodeData]\r\n\t\t};\r\n\t}\r\n</script>\r\n\r\n{#if node && document && clickOutside}\r\n\t<div\r\n\t\tclass=\"nodeEl\"\r\n\t\tid={node.id}\r\n\t\tdata-dropzone\r\n\t\tbind:this={nodeEl}\r\n\t\tbind:clientWidth\r\n\t\tbind:clientHeight\r\n\t\tstyle=\"position: absolute; left:{node.x}px; top:{node.y}px; width:{node?.style\r\n\t\t\t?.width}px; height:{node?.style?.height}px; font-size: {fontSize};\r\n\t\tbackground-color: {node?.style?.backgroundColor || '#fee9004b'}\"\r\n\t\tuse:clickOutside={{ enabled: isFocused, handleUnselect }}\r\n\t\ton:end={handleEnd}\r\n\t\ton:focusout={handleUnselect}\r\n\t\ton:dragstart={handleDragStart}\r\n\t>\r\n\t\t<div\r\n\t\t\tdata-gripper\r\n\t\t\tstyle=\"width: 15px; height:15px; position: absolute; top:-10px; right:0px; margin:.5em; color:grey; filter: drop-shadow(0 10px 0.75rem white);\"\r\n\t\t>\r\n\t\t\t<Thumbtack />\r\n\t\t</div>\r\n\t\t<div class=\"title\">\r\n\t\t\t<!-- No Editable if on Menu; check if this element is contained within a child of a parent with data-menu attribute  -->\r\n\t\t\t{#if nodeEl?.closest('[data-menu]')}\r\n\t\t\t\t{node.name}\r\n\t\t\t{:else}\r\n\t\t\t\t<EditableText bind:value={node.name} />\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\r\n\t\t<!-- x: {node.x?.toFixed(1)}px; y: {node.y.toFixed(1)}px; <br />\r\n\t\twidth: {node.style.width?.toFixed(1)}px; height: {node.style.height.toFixed(1)}px; -->\r\n\t\t<!-- Container font-size: {nodeEl\r\n\t\t\t? window.getComputedStyle(nodeEl)['font-size']\r\n\t\t\t: 'Calculating size...'} -->\r\n\t\t<svelte:component this={node.component} bind:props={node.props} />\r\n\t\t{#if node?.children?.length > 0}\r\n\t\t\t{#each node.children as child}\r\n\t\t\t\t<svelte:self\r\n\t\t\t\t\tbind:node={child}\r\n\t\t\t\t\tarenaWidth={clientWidth}\r\n\t\t\t\t\tarenaHeight={clientHeight}\r\n\t\t\t\t\tbind:isDragging\r\n\t\t\t\t/>\r\n\t\t\t{/each}\r\n\t\t{/if}\r\n\r\n\t\t{#if nodeEl && isFocused}\r\n\t\t\t<!-- OnSelect Context Menu  -->\r\n\t\t\t<ContextMenu bind:node />\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t{#if nodeEl && isFocused}\r\n\t\t<!-- Handles  -->\r\n\t\t{#each directions as direction}\r\n\t\t\t<ResizeHandle\r\n\t\t\t\tbind:x={node.x}\r\n\t\t\t\tbind:y={node.y}\r\n\t\t\t\tbind:width={node.style.width}\r\n\t\t\t\tbind:height={node.style.height}\r\n\t\t\t\tbind:isDragging\r\n\t\t\t\t{maxFrameWidth}\r\n\t\t\t\t{minFrameWidth}\r\n\t\t\t\t{arenaWidth}\r\n\t\t\t\t{arenaHeight}\r\n\t\t\t\t{maxFrameHeight}\r\n\t\t\t\t{minFrameHeight}\r\n\t\t\t\t{direction}\r\n\t\t\t\t{grid}\r\n\t\t\t/>\r\n\t\t{/each}\r\n\t{/if}\r\n{/if}\r\n\r\n<style>\r\n\t/* Works, but CDNs are bad... */\r\n\t@import url('https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap');\r\n\r\n\t.title {\r\n\t\twidth: 80%;\r\n\t\theight: auto;\r\n\t\tfont-size: 1em;\r\n\t\t/* font-family: 'Luckiest Guy', cursive; */\r\n\t\tfont-family: 'Permanent Marker', cursive;\r\n\t}\r\n\t.nodeEl {\r\n\t\tbox-shadow: 0.1em 0.1em 0.5em 0em rgba(183, 183, 183, 0.5);\r\n\t\tborder-radius: 0.2em;\r\n\t\tposition: absolute;\r\n\t\tpadding: 1em;\r\n\t\tmargin: 0.5em;\r\n\t\twidth: min-content;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t@font-face {\r\n\t\tfont-family: 'Permanent Marker';\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: 400;\r\n\t\tfont-display: swap;\r\n\t\tsrc: url(./fonts/perm-marker.woff2) format('woff2');\r\n\t\tunicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\r\n\t\t\tU+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\r\n\t}\r\n\r\n\t@font-face {\r\n\t\tfont-family: 'Luckiest Guy';\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: 400;\r\n\t\tsrc: url(https://fonts.gstatic.com/s/luckiestguy/v17/_gP_1RrxsjcxVyin9l9n_j2hTd52.woff2)\r\n\t\t\tformat('woff2');\r\n\t\tunicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\r\n\t\t\tU+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\r\n\t}\r\n</style>\r\n","<script>\r\n\timport RangeSlider from 'svelte-range-slider-pips';\r\n\timport { createNewNode } from './utils';\r\n\timport { safeid } from '$lib/utils';\r\n\timport PointerTracker from '@douganderson444/pointer-tracker';\r\n\timport { onMount } from 'svelte';\r\n\timport Container from './Container.svelte';\r\n\r\n\texport let children;\r\n\texport let scale = 1;\r\n\texport let arenaHeight;\r\n\texport let arenaWidth;\r\n\r\n\tlet pallette;\r\n\tlet newContainer;\r\n\r\n\tonMount(async () => {\r\n\t\tcreateNode();\r\n\t\t// Watch for pointers\r\n\t\tconst pointerTracker = new PointerTracker(pallette, {\r\n\t\t\tstart: (pointer, event) => {\r\n\t\t\t\t// event.stopPropagation();\r\n\t\t\t\t// event.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tfunction handleAddNode(event) {\r\n\t\tconst newNode = createNewNode();\r\n\t\tchildren.push(newNode);\r\n\t\tchildren = children;\r\n\t}\r\n\r\n\tfunction createNode() {\r\n\t\tnewContainer = createNewNode({\r\n\t\t\tname: '+ Drag Me',\r\n\t\t\tstyle: {\r\n\t\t\t\tbackgroundColor: '#fee9004b',\r\n\t\t\t\twidth: 200,\r\n\t\t\t\theight: 60\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onDropped(event) {\r\n\t\tcreateNode();\r\n\t}\r\n</script>\r\n\r\n<div class=\"pallette\" bind:this={pallette} data-menu>\r\n\tScale {scale}\r\n\t{#if arenaWidth && arenaHeight}\r\n\t\t{#key newContainer}\r\n\t\t\t<Container node={newContainer} on:drop={onDropped} {arenaWidth} {arenaHeight} />\r\n\t\t{/key}\r\n\t{/if}\r\n\t<!-- <button on:click={handleAddGridItem}>Add Grid Item</button>\r\n\t<button on:click={handleAddMapItem}>Add Map</button>\r\n\t<button on:click={handleAddListItem}>Add List</button> -->\r\n</div>\r\n\r\n<style>\r\n\t.pallette {\r\n\t\twidth: 100%;\r\n\t\theight: 5em;\r\n\t\tline-height: 2em;\r\n\t\tcursor: default;\r\n\t\ttext-align: center;\r\n\t\tpadding: 0 0.5em;\r\n\t\tbackground: #d9d9d9c7;\r\n\t\t/* position: fixed; */\r\n\t\tposition: absolute;\r\n\t\ttop: 0em;\r\n\t\tbox-sizing: border-box;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t/* #reverse-pips .rangePips {\r\n\t\tbottom: auto;\r\n\t\ttop: -1em;\r\n\t}\r\n\t#reverse-pips .pip {\r\n\t\tbackground: rgb(198, 187, 224);\r\n\t\ttop: auto;\r\n\t\tbottom: 0.25em;\r\n\t\twidth: 2px;\r\n\t\ttransform: translateX(-1px);\r\n\t\ttransition-duration: 0.5s;\r\n\t\topacity: 0.7;\r\n\t}\r\n\t#reverse-pips .pip:nth-child(5n + 1) {\r\n\t\theight: 0.8em;\r\n\t\topacity: 0.9;\r\n\t}\r\n\t#reverse-pips .pip:nth-child(5n),\r\n\t#reverse-pips .pip:nth-child(5n + 2) {\r\n\t\theight: 0.65em;\r\n\t}\r\n\t#reverse-pips .pip.selected {\r\n\t\tbackground: rgb(255, 0, 157);\r\n\t\ttransition-duration: 0.05s;\r\n\t\topacity: 1;\r\n\t} */\r\n\r\n\t:global(#reverse-pips .rangePips) {\r\n\t\tbottom: auto;\r\n\t\ttop: -1em;\r\n\t}\r\n\t:global(#reverse-pips .pip) {\r\n\t\tbackground: rgb(198, 187, 224);\r\n\t\ttop: auto;\r\n\t\tbottom: 0.25em;\r\n\t\twidth: 2px;\r\n\t\ttransform: translateX(-1px);\r\n\t\ttransition-duration: 0.5s;\r\n\t\topacity: 0.7;\r\n\t}\r\n\t:global(#reverse-pips .pip:nth-child(5n + 1)) {\r\n\t\theight: 0.8em;\r\n\t\topacity: 0.9;\r\n\t}\r\n\r\n\t:global(#reverse-pips .pip:nth-child(5n), #reverse-pips .pip:nth-child(5n + 2)) {\r\n\t\theight: 0.65em;\r\n\t}\r\n\r\n\t:global(#reverse-pips .pip.selected) {\r\n\t\tbackground: #0bb113;\r\n\t\ttransition-duration: 0.05s;\r\n\t\topacity: 1;\r\n\t}\r\n</style>\r\n","class Pointer {\r\n    constructor(nativePointer) {\r\n        /** Unique ID for this pointer */\r\n        this.id = -1;\r\n        this.nativePointer = nativePointer;\r\n        this.pageX = nativePointer.pageX;\r\n        this.pageY = nativePointer.pageY;\r\n        this.clientX = nativePointer.clientX;\r\n        this.clientY = nativePointer.clientY;\r\n        if (self.Touch && nativePointer instanceof Touch) {\r\n            this.id = nativePointer.identifier;\r\n        }\r\n        else if (isPointerEvent(nativePointer)) {\r\n            // is PointerEvent\r\n            this.id = nativePointer.pointerId;\r\n        }\r\n    }\r\n    /**\r\n     * Returns an expanded set of Pointers for high-resolution inputs.\r\n     */\r\n    getCoalesced() {\r\n        if ('getCoalescedEvents' in this.nativePointer) {\r\n            const events = this.nativePointer\r\n                .getCoalescedEvents()\r\n                .map((p) => new Pointer(p));\r\n            // Firefox sometimes returns an empty list here. I'm not sure it's doing the right thing.\r\n            // https://github.com/w3c/pointerevents/issues/409\r\n            if (events.length > 0)\r\n                return events;\r\n            // Otherwise, Firefox falls through‚Ä¶\r\n        }\r\n        return [this];\r\n    }\r\n}\r\nconst isPointerEvent = (event) => 'pointerId' in event;\r\nconst isTouchEvent = (event) => 'changedTouches' in event;\r\nconst noop = () => { };\r\n/**\r\n * Track pointers across a particular element\r\n */\r\nclass PointerTracker {\r\n    /**\r\n     * Track pointers across a particular element\r\n     *\r\n     * @param element Element to monitor.\r\n     * @param options\r\n     */\r\n    constructor(_element, { start = () => true, move = noop, end = noop, rawUpdates = false, avoidPointerEvents = false, eventListenerOptions = { capture: false, passive: false, once: false }, } = {}) {\r\n        this._element = _element;\r\n        /**\r\n         * State of the tracked pointers when they were pressed/touched.\r\n         */\r\n        this.startPointers = [];\r\n        /**\r\n         * Latest state of the tracked pointers. Contains the same number of pointers, and in the same\r\n         * order as this.startPointers.\r\n         */\r\n        this.currentPointers = [];\r\n        /**\r\n         * Firefox has a bug where touch-based pointer events have a `buttons` of 0, when this shouldn't\r\n         * happen. https://bugzilla.mozilla.org/show_bug.cgi?id=1729440\r\n         *\r\n         * Usually we treat `buttons === 0` as no-longer-pressed. This set allows us to exclude these\r\n         * buggy Firefox events.\r\n         */\r\n        this._excludeFromButtonsCheck = new Set();\r\n        /**\r\n         * Listener for mouse/pointer starts.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerStart = (event) => {\r\n            if (isPointerEvent(event) && event.buttons === 0) {\r\n                // This is the buggy Firefox case. See _excludeFromButtonsCheck.\r\n                this._excludeFromButtonsCheck.add(event.pointerId);\r\n            }\r\n            else if (!(event.buttons & 1 /* LeftMouseOrTouchOrPenDown */)) {\r\n                return;\r\n            }\r\n            const pointer = new Pointer(event);\r\n            // If we're already tracking this pointer, ignore this event.\r\n            // This happens with mouse events when multiple buttons are pressed.\r\n            if (this.currentPointers.some((p) => p.id === pointer.id))\r\n                return;\r\n            if (!this._triggerPointerStart(pointer, event))\r\n                return;\r\n            // Add listeners for additional events.\r\n            // The listeners may already exist, but no harm in adding them again.\r\n            if (isPointerEvent(event)) {\r\n                const capturingElement = event.target && 'setPointerCapture' in event.target\r\n                    ? event.target\r\n                    : this._element;\r\n                capturingElement.setPointerCapture(event.pointerId);\r\n                this._element.addEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move, this._eventListenerOptions);\r\n                this._element.addEventListener('pointerup', this._pointerEnd, this._eventListenerOptions);\r\n                this._element.addEventListener('pointercancel', this._pointerEnd, this._eventListenerOptions);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.addEventListener('mousemove', this._move);\r\n                window.addEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchstart.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchStart = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerStart(new Pointer(touch), event);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for pointer/mouse/touch move events.\r\n         */\r\n        this._move = (event) => {\r\n            if (!isTouchEvent(event) &&\r\n                (!isPointerEvent(event) ||\r\n                    !this._excludeFromButtonsCheck.has(event.pointerId)) &&\r\n                event.buttons === 0 /* None */) {\r\n                // This happens in a number of buggy cases where the browser failed to deliver a pointerup\r\n                // or pointercancel. If we see the pointer moving without any buttons down, synthesize an end.\r\n                // https://github.com/w3c/pointerevents/issues/407\r\n                // https://github.com/w3c/pointerevents/issues/408\r\n                this._pointerEnd(event);\r\n                return;\r\n            }\r\n            const previousPointers = this.currentPointers.slice();\r\n            const changedPointers = isTouchEvent(event)\r\n                ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n                : [new Pointer(event)];\r\n            const trackedChangedPointers = [];\r\n            for (const pointer of changedPointers) {\r\n                const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n                if (index === -1)\r\n                    continue; // Not a pointer we're tracking\r\n                trackedChangedPointers.push(pointer);\r\n                this.currentPointers[index] = pointer;\r\n            }\r\n            if (trackedChangedPointers.length === 0)\r\n                return;\r\n            this._moveCallback(previousPointers, trackedChangedPointers, event);\r\n        };\r\n        /**\r\n         * Call the end callback for this pointer.\r\n         *\r\n         * @param pointer Pointer\r\n         * @param event Related event\r\n         */\r\n        this._triggerPointerEnd = (pointer, event) => {\r\n            // Main button still down?\r\n            // With mouse events, you get a mouseup per mouse button, so the left button might still be down.\r\n            if (!isTouchEvent(event) &&\r\n                event.buttons & 1 /* LeftMouseOrTouchOrPenDown */) {\r\n                return false;\r\n            }\r\n            const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n            // Not a pointer we're interested in?\r\n            if (index === -1)\r\n                return false;\r\n            this.currentPointers.splice(index, 1);\r\n            this.startPointers.splice(index, 1);\r\n            this._excludeFromButtonsCheck.delete(pointer.id);\r\n            // The event.type might be a 'move' event due to workarounds for weird mouse behaviour.\r\n            // See _move for details.\r\n            const cancelled = !(event.type === 'mouseup' ||\r\n                event.type === 'touchend' ||\r\n                event.type === 'pointerup');\r\n            this._endCallback(pointer, event, cancelled);\r\n            return true;\r\n        };\r\n        /**\r\n         * Listener for mouse/pointer ends.\r\n         *\r\n         * @param event This will only be a MouseEvent if the browser doesn't support pointer events.\r\n         */\r\n        this._pointerEnd = (event) => {\r\n            if (!this._triggerPointerEnd(new Pointer(event), event))\r\n                return;\r\n            if (isPointerEvent(event)) {\r\n                if (this.currentPointers.length)\r\n                    return;\r\n                this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n                this._element.removeEventListener('pointerup', this._pointerEnd);\r\n                this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n            }\r\n            else {\r\n                // MouseEvent\r\n                window.removeEventListener('mousemove', this._move);\r\n                window.removeEventListener('mouseup', this._pointerEnd);\r\n            }\r\n        };\r\n        /**\r\n         * Listener for touchend.\r\n         * Only used if the browser doesn't support pointer events.\r\n         */\r\n        this._touchEnd = (event) => {\r\n            for (const touch of Array.from(event.changedTouches)) {\r\n                this._triggerPointerEnd(new Pointer(touch), event);\r\n            }\r\n        };\r\n        this._startCallback = start;\r\n        this._moveCallback = move;\r\n        this._endCallback = end;\r\n        this._rawUpdates = rawUpdates && 'onpointerrawupdate' in window;\r\n        this._eventListenerOptions = eventListenerOptions;\r\n        // Add listeners\r\n        if (self.PointerEvent && !avoidPointerEvents) {\r\n            this._element.addEventListener('pointerdown', this._pointerStart, this._eventListenerOptions);\r\n        }\r\n        else {\r\n            this._element.addEventListener('mousedown', this._pointerStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchstart', this._touchStart, this._eventListenerOptions);\r\n            this._element.addEventListener('touchmove', this._move, this._eventListenerOptions);\r\n            this._element.addEventListener('touchend', this._touchEnd, this._eventListenerOptions);\r\n            this._element.addEventListener('touchcancel', this._touchEnd, this._eventListenerOptions);\r\n        }\r\n    }\r\n    /**\r\n     * Remove all listeners.\r\n     */\r\n    stop() {\r\n        this._element.removeEventListener('pointerdown', this._pointerStart);\r\n        this._element.removeEventListener('mousedown', this._pointerStart);\r\n        this._element.removeEventListener('touchstart', this._touchStart);\r\n        this._element.removeEventListener('touchmove', this._move);\r\n        this._element.removeEventListener('touchend', this._touchEnd);\r\n        this._element.removeEventListener('touchcancel', this._touchEnd);\r\n        this._element.removeEventListener(this._rawUpdates ? 'pointerrawupdate' : 'pointermove', this._move);\r\n        this._element.removeEventListener('pointerup', this._pointerEnd);\r\n        this._element.removeEventListener('pointercancel', this._pointerEnd);\r\n        window.removeEventListener('mousemove', this._move);\r\n        window.removeEventListener('mouseup', this._pointerEnd);\r\n    }\r\n    /**\r\n     * Call the start callback for this pointer, and track it if the user wants.\r\n     *\r\n     * @param pointer Pointer\r\n     * @param event Related event\r\n     * @returns Whether the pointer is being tracked.\r\n     */\r\n    _triggerPointerStart(pointer, event) {\r\n        if (!this._startCallback(pointer, event))\r\n            return false;\r\n        this.currentPointers.push(pointer);\r\n        this.startPointers.push(pointer);\r\n        return true;\r\n    }\r\n}\n\nexport { PointerTracker as default };\n","// inspired by https://github.com/GoogleChromeLabs/pinch-zoom/blob/master/lib/pinch-zoom.ts\r\nimport PointerTracker from '@douganderson444/pointer-tracker';\r\nimport './styles.css';\r\nconst minScaleAttr = 'min-scale';\r\nfunction getDistance(a, b) {\r\n    if (!b)\r\n        return 0;\r\n    return Math.sqrt((b.clientX - a.clientX) ** 2 + (b.clientY - a.clientY) ** 2);\r\n}\r\nfunction getMidpoint(a, b) {\r\n    if (!b)\r\n        return a;\r\n    return {\r\n        clientX: (a.clientX + b.clientX) / 2,\r\n        clientY: (a.clientY + b.clientY) / 2\r\n    };\r\n}\r\nfunction getAbsoluteValue(value, max) {\r\n    if (typeof value === 'number')\r\n        return value;\r\n    if (value.trimRight().endsWith('%')) {\r\n        return (max * parseFloat(value)) / 100;\r\n    }\r\n    return parseFloat(value);\r\n}\r\nfunction createMatrix() {\r\n    // initialize a new 16 element 3D array matrix\r\n    return new DOMMatrix([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\r\n}\r\nfunction createPoint() {\r\n    return new DOMPoint();\r\n}\r\nconst MIN_SCALE = 0.01;\r\nexport default class PinchZoom {\r\n    // The element that we'll transform.\r\n    _node;\r\n    // Ideally this would be shadow DOM, but we don't have the browser\r\n    // support yet.\r\n    _parentEl;\r\n    // Current transform.\r\n    _transform = createMatrix();\r\n    _pointerTracker;\r\n    _handle = null;\r\n    static get observedAttributes() {\r\n        return [minScaleAttr];\r\n    }\r\n    /**\r\n     * handle - an optional handle element to grab by\r\n     */\r\n    constructor(node, { handle } = {}) {\r\n        this._node = node;\r\n        this._parentEl = this._node.parentElement || document.body;\r\n        this._handle = handle;\r\n        // Watch for children changes.\r\n        // Note this won't fire for initial contents,\r\n        // so _stageElChange is also called in connectedCallback.\r\n        new MutationObserver(() => this._stageElChange()).observe(this._node, { childList: true });\r\n        // Watch for pointers (nodes[i] as HTMLElement)\r\n        this._pointerTracker = new PointerTracker(this._parentEl, {\r\n            eventListenerOptions: { capture: true },\r\n            start: (pointer, event) => {\r\n                // ignore single pointers on input / editable elements\r\n                if (this._pointerTracker.currentPointers.length === 0 &&\r\n                    (event.target instanceof HTMLInputElement || event.target.isContentEditable)) {\r\n                    return false;\r\n                }\r\n                if (this._pointerTracker.currentPointers.length === 2 || !this._parentEl)\r\n                    // We only want to track 2 pointers at most\r\n                    // there already exists 2 pointers, and now this would have been the 3rd pointer so let's stop here\r\n                    return false;\r\n                if (this._pointerTracker.currentPointers.length === 1) {\r\n                    // there already exists one pointer, and now this is the second pointer\r\n                    // then it's a pinch zoom and can be from anywhere, incl if the pointer is over a DOM tree child\r\n                    // events on this element are captured (see eventListenerOptions above) so stopping prop means they don't go down the DOM tree\r\n                    event.preventDefault();\r\n                    event.stopPropagation(); // if it's a 2 touch move, we want exclusive rights over the pointer\r\n                    return true;\r\n                }\r\n                if (this._pointerTracker.currentPointers.length === 0) {\r\n                    // if length == 0, then this is the first pointer tracked\r\n                    // it's for panning, but only on the parent or this node\r\n                    // so event.target has to be on this node or it's parent to pan everybody\r\n                    // track this single pointer in case a second one gets added\r\n                    // but don't block it's use by children, yet\r\n                    return true;\r\n                }\r\n                // else, the pointer event must have happened on a child node, where pan doesn't apply\r\n                return false;\r\n            },\r\n            move: (previousPointers, changedPointers, event) => {\r\n                // tracking purposes only, no action\r\n                if (this._pointerTracker.currentPointers.length === 0)\r\n                    return;\r\n                // If it's a single pointer in a child, ignore it, unless it's a handle\r\n                if (this._pointerTracker.currentPointers.length === 1 &&\r\n                    !(event.target == this._parentEl || event.target == node))\r\n                    return;\r\n                // pan if single pointer on parent container or target node\r\n                // zoom if double pointer anywhere\r\n                event.stopPropagation(); // continue exclusive rights over the pointer from DOM tree\r\n                this._onPointerMove(previousPointers, this._pointerTracker.currentPointers);\r\n            },\r\n            end: (pointer, event, cancelled) => { }\r\n        });\r\n        this._parentEl.addEventListener('wheel', (event) => this._onWheel(event));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        if (name === minScaleAttr) {\r\n            if (this.scale < this.minScale) {\r\n                this.setTransform({ scale: this.minScale });\r\n            }\r\n        }\r\n    }\r\n    get minScale() {\r\n        const attrValue = this._node.getAttribute(minScaleAttr);\r\n        if (!attrValue)\r\n            return MIN_SCALE;\r\n        const value = parseFloat(attrValue);\r\n        if (Number.isFinite(value))\r\n            return Math.max(MIN_SCALE, value);\r\n        return MIN_SCALE;\r\n    }\r\n    set minScale(value) {\r\n        this._node.setAttribute(minScaleAttr, String(value));\r\n    }\r\n    connectedCallback() {\r\n        this._stageElChange();\r\n    }\r\n    get x() {\r\n        return this._transform.e;\r\n    }\r\n    get y() {\r\n        return this._transform.f;\r\n    }\r\n    get scale() {\r\n        return this._transform.a;\r\n    }\r\n    /**\r\n     * Change the scale, adjusting x/y by a given transform origin.\r\n     */\r\n    scaleTo(scale, opts = {}) {\r\n        let { originX = 0, originY = 0 } = opts;\r\n        const { relativeTo = 'content', allowChangeEvent = false } = opts;\r\n        const relativeToEl = relativeTo === 'content' ? this._parentEl : this._node;\r\n        // No content element? Fall back to just setting scale\r\n        if (!relativeToEl || !this._parentEl) {\r\n            this.setTransform({ scale, allowChangeEvent });\r\n            return;\r\n        }\r\n        const rect = relativeToEl.getBoundingClientRect();\r\n        originX = getAbsoluteValue(originX, rect.width);\r\n        originY = getAbsoluteValue(originY, rect.height);\r\n        if (relativeTo === 'content') {\r\n            originX += this.x;\r\n            originY += this.y;\r\n        }\r\n        else {\r\n            const currentRect = this._parentEl.getBoundingClientRect();\r\n            originX -= currentRect.left;\r\n            originY -= currentRect.top;\r\n        }\r\n        this._applyChange({\r\n            allowChangeEvent,\r\n            originX,\r\n            originY,\r\n            scaleDiff: scale / this.scale\r\n        });\r\n    }\r\n    /**\r\n     * Update the stage with a given scale/x/y.\r\n     */\r\n    setTransform(opts = {}) {\r\n        const { scale = this.scale, allowChangeEvent = false } = opts;\r\n        let { x = this.x, y = this.y } = opts;\r\n        // If we don't have an element to position, just set the value as given.\r\n        // We'll check bounds later.\r\n        if (!this._parentEl) {\r\n            this._updateTransform(scale, x, y, allowChangeEvent);\r\n            return;\r\n        }\r\n        // Get current layout\r\n        const thisBounds = this._node.getBoundingClientRect();\r\n        const parentElBounds = this._parentEl.getBoundingClientRect();\r\n        // Not displayed. May be disconnected or display:none.\r\n        // Just take the values, and we'll check bounds later.\r\n        if (!thisBounds.width || !thisBounds.height) {\r\n            this._updateTransform(scale, x, y, allowChangeEvent);\r\n            return;\r\n        }\r\n        // Create points for _parentEl.\r\n        let topLeft = createPoint();\r\n        topLeft.x = parentElBounds.left - thisBounds.left;\r\n        topLeft.y = parentElBounds.top - thisBounds.top;\r\n        let bottomRight = createPoint();\r\n        bottomRight.x = parentElBounds.width + topLeft.x;\r\n        bottomRight.y = parentElBounds.height + topLeft.y;\r\n        // Calculate the intended position of _parentEl.\r\n        const matrix = createMatrix()\r\n            .translate(x, y)\r\n            .scale(scale)\r\n            // Undo current transform\r\n            .multiply(this._transform.inverse());\r\n        topLeft = topLeft.matrixTransform(matrix);\r\n        bottomRight = bottomRight.matrixTransform(matrix);\r\n        // Ensure _parentEl can't move beyond out-of-bounds.\r\n        // Correct for x\r\n        // if (topLeft.x > thisBounds.width) {\r\n        // \tx += thisBounds.width - topLeft.x;\r\n        // } else if (bottomRight.x < 0) {\r\n        // \tx += -bottomRight.x;\r\n        // }\r\n        // Correct for y\r\n        // if (topLeft.y > thisBounds.height) {\r\n        // \ty += thisBounds.height - topLeft.y;\r\n        // } else if (bottomRight.y < 0) {\r\n        // \ty += -bottomRight.y;\r\n        // }\r\n        this._updateTransform(scale, x, y, allowChangeEvent);\r\n    }\r\n    /**\r\n     * Update transform values without checking bounds. This is only called in setTransform.\r\n     */\r\n    _updateTransform(scale, x, y, allowChangeEvent) {\r\n        // Avoid scaling to zero\r\n        if (scale < this.minScale)\r\n            return;\r\n        // Return if there's no change\r\n        if (scale === this.scale && x === this.x && y === this.y)\r\n            return;\r\n        this._transform.e = x;\r\n        this._transform.f = y;\r\n        this._transform.d = this._transform.a = scale;\r\n        // this._node.style.setProperty('--x', this.x + 'px');\r\n        // this._node.style.setProperty('--y', this.y + 'px');\r\n        // this._node.style.setProperty('--scale', this.scale + '');\r\n        this._node.style.transform = `translate(${x}px,${y}px) scale(${scale})`;\r\n        if (allowChangeEvent) {\r\n            const event = new Event('change', { bubbles: true });\r\n            this._node.dispatchEvent(event);\r\n        }\r\n    }\r\n    /**\r\n     * Called when the direct children of this element change.\r\n     * Until we have have shadow dom support across the board, we\r\n     * require a single element to be the child of <pinch-zoom>, and\r\n     * that's the element we pan/scale.\r\n     */\r\n    _stageElChange() {\r\n        this._parentEl = this._node.parentElement || document.body;\r\n        // Do a bounds check\r\n        this.setTransform({ allowChangeEvent: true });\r\n    }\r\n    _onWheel(event) {\r\n        if (!this._parentEl)\r\n            return;\r\n        // if (this._parentEl !== event.target) return;\r\n        event.preventDefault();\r\n        const currentRect = this._parentEl.getBoundingClientRect();\r\n        let { deltaY } = event;\r\n        const { ctrlKey, deltaMode } = event;\r\n        if (deltaMode === 1) {\r\n            // 1 is \"lines\", 0 is \"pixels\"\r\n            // Firefox uses \"lines\" for some types of mouse\r\n            deltaY *= 15;\r\n        }\r\n        // ctrlKey is true when pinch-zooming on a trackpad.\r\n        const divisor = ctrlKey ? 200 : 600;\r\n        const scaleDiff = 1 - deltaY / divisor;\r\n        this._applyChange({\r\n            scaleDiff,\r\n            originX: event.pageX - this._parentEl.offsetLeft - this._parentEl.clientWidth / 2,\r\n            originY: event.pageY - this._parentEl.offsetTop - this._parentEl.clientHeight / 2,\r\n            allowChangeEvent: true\r\n        });\r\n    }\r\n    _onPointerMove(previousPointers, currentPointers) {\r\n        if (!this._parentEl)\r\n            return;\r\n        // Combine next points with previous points\r\n        const currentRect = this._parentEl.getBoundingClientRect();\r\n        // For calculating panning movement\r\n        const prevMidpoint = getMidpoint(previousPointers[0], previousPointers[1]);\r\n        const newMidpoint = getMidpoint(currentPointers[0], currentPointers[1]);\r\n        // Midpoint within the element\r\n        const originX = prevMidpoint.clientX - currentRect.left - currentRect.width / 2;\r\n        const originY = prevMidpoint.clientY - currentRect.top - currentRect.height / 2;\r\n        // Calculate the desired change in scale\r\n        const prevDistance = getDistance(previousPointers[0], previousPointers[1]);\r\n        const newDistance = getDistance(currentPointers[0], currentPointers[1]);\r\n        const scaleDiff = prevDistance ? newDistance / prevDistance : 1;\r\n        this._applyChange({\r\n            originX,\r\n            originY,\r\n            scaleDiff,\r\n            panX: newMidpoint.clientX - prevMidpoint.clientX,\r\n            panY: newMidpoint.clientY - prevMidpoint.clientY,\r\n            allowChangeEvent: true\r\n        });\r\n    }\r\n    /** Transform the view & fire a change event */\r\n    _applyChange(opts = {}) {\r\n        const { panX = 0, panY = 0, originX = 0, originY = 0, scaleDiff = 1, allowChangeEvent = false } = opts;\r\n        const matrix = createMatrix()\r\n            // Translate according to panning.\r\n            .translate(panX, panY)\r\n            // Scale about the origin.\r\n            .translate(originX, originY)\r\n            // Apply current translate\r\n            // .translate(this.x, this.y) // moved to line below vvv\r\n            .scale(scaleDiff)\r\n            .translate(-originX, -originY)\r\n            // Apply current transform.\r\n            .multiply(this._transform);\r\n        // Convert the transform into basic translate & scale.\r\n        this.setTransform({\r\n            allowChangeEvent,\r\n            scale: matrix.a,\r\n            x: matrix.e,\r\n            y: matrix.f\r\n        });\r\n    }\r\n}\r\n","import pinchZoom from './pinchZoom';\r\nexport const pzoom = (node, params) => {\r\n    console.log({ params });\r\n    let container = node.parentElement || document.body;\r\n    // ensure touch and select action defaults are disable\r\n    container.style['touch-action'] = 'none';\r\n    container.style['user-select'] = 'none';\r\n    container.style['overflow'] = 'hidden';\r\n    container.style['position'] = 'relative';\r\n    node.style['touch-action'] = 'none';\r\n    node.style['user-select'] = 'none';\r\n    node.style['position'] = 'absolute';\r\n    // node.style['transform'] = 'translate(var(--x), var(--y)) scale(var(--scale))';\r\n    // node.style['transform-origin'] = '0 0';\r\n    // node.style['will-change'] = 'transform';\r\n    new pinchZoom(node, { handle: params?.handle });\r\n    return {\r\n        update(params) {\r\n            // the value of `bar` has changed\r\n            new pinchZoom(node, { handle: params?.handle });\r\n        },\r\n        destroy() {\r\n            // the node has been removed from the DOM\r\n        }\r\n    };\r\n};\r\n","<script>\r\n\timport Canvas from './Canvas.svelte';\r\n\timport Menu from './Menu.svelte';\r\n\timport Nodes from './Nodes.svelte';\r\n\timport Links from './Links.svelte';\r\n\timport Object from './Object.svelte';\r\n\timport Wrapper from './Wrapper.svelte';\r\n\r\n\timport { pzoom } from '@douganderson444/panzoom-node';\r\n\timport Container from './Container.svelte';\r\n\timport { scale } from './stores.js';\r\n\r\n\texport let data;\r\n\texport let width = 400;\r\n\texport let height = 600;\r\n\r\n\tlet clientWidth, clientHeight;\r\n\tlet zoomable;\r\n\r\n\tfunction handleChange(e) {\r\n\t\tlet m;\r\n\t\tconst re = /(\\w+)\\(([^)]*)\\)/g;\r\n\t\twhile ((m = re.exec(zoomable.style.transform))) {\r\n\t\t\tif (m[1] == 'scale' && parseFloat(m[2]).toFixed(2) != $scale.value.toFixed(2)) {\r\n\t\t\t\t$scale.value = parseFloat(m[2]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n{#if $scale}\r\n\t<div\r\n\t\tclass=\"canvas\"\r\n\t\tstyle=\"height: {height}px; width: {width}px;\"\r\n\t\tbind:clientWidth\r\n\t\tbind:clientHeight\r\n\t>\r\n\t\t<Menu\r\n\t\t\tbind:scale={$scale.value}\r\n\t\t\tarenaWidth={clientWidth * 100}\r\n\t\t\tarenaHeight={clientHeight * 100}\r\n\t\t/>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"zoomable flexbox\"\r\n\t\t\tuse:pzoom\r\n\t\t\ton:change={handleChange}\r\n\t\t\tbind:this={zoomable}\r\n\t\t\tstyle=\"transform: translate(45px, 95px)\"\r\n\t\t>\r\n\t\t\t<Container bind:node={data} arenaWidth={clientWidth * 100} arenaHeight={clientHeight * 100} />\r\n\t\t\t<!-- <Links links={data.links} /> -->\r\n\t\t</div>\r\n\t\t<!-- <Object val={data} /> -->\r\n\t</div>\r\n{/if}\r\n\r\n<style>\r\n\t.canvas {\r\n\t\tborder: 1px solid forestgreen;\r\n\t\tmargin: 0em;\r\n\t\toverflow: hidden;\r\n\t\tmin-height: 800px;\r\n\t\tposition: relative;\r\n\t}\r\n\t.zoomable {\r\n\t\tborder-top: 1px dashed fuchsia;\r\n\t\tborder-left: 1px dashed fuchsia;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.flexbox {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: flex-start;\r\n\t\talign-content: flex-start;\r\n\t}\r\n</style>\r\n","<script>\r\n\timport { onMount } from 'svelte';\r\n\timport Sketch from '$lib/Sketch.svelte';\r\n\timport { safeid } from '$lib/utils';\r\n\timport { colors } from '$lib/config';\r\n\r\n\tlet width;\r\n\tlet height;\r\n\tlet mounted;\r\n\r\n\tlet rectColor = () => '#' + (((1 << 24) * Math.random()) | 0).toString(16);\r\n\r\n\tfunction randomColor() {\r\n\t\treturn Math.floor((Math.random() * 10) % colors.length);\r\n\t}\r\n\r\n\tlet data = {\r\n\t\tname: 'My Dashboard of Lists',\r\n\t\tid: safeid(),\r\n\t\tx: 20,\r\n\t\ty: 20,\r\n\t\tstyle: {\r\n\t\t\tbackgroundColor: colors[randomColor()],\r\n\t\t\twidth: 600,\r\n\t\t\tleft: 20,\r\n\t\t\ttop: 20,\r\n\t\t\theight: 800\r\n\t\t},\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tname: 'Child 1',\r\n\t\t\t\tid: safeid(),\r\n\t\t\t\tx: 60,\r\n\t\t\t\ty: 80,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: colors[randomColor()],\r\n\t\t\t\t\twidth: 220,\r\n\t\t\t\t\theight: 520,\r\n\t\t\t\t\tleft: 20,\r\n\t\t\t\t\ttop: 20\r\n\t\t\t\t},\r\n\t\t\t\t// component: DragHandles,\r\n\t\t\t\tprops: [],\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Child A',\r\n\t\t\t\t\t\tid: safeid(),\r\n\t\t\t\t\t\tx: 20,\r\n\t\t\t\t\t\ty: 80,\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tbackgroundColor: colors[randomColor()],\r\n\t\t\t\t\t\t\twidth: 120,\r\n\t\t\t\t\t\t\theight: 120,\r\n\t\t\t\t\t\t\tleft: 20,\r\n\t\t\t\t\t\t\ttop: 20\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// component: DragHandles,\r\n\t\t\t\t\t\tprops: [],\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Child 2',\r\n\t\t\t\tid: safeid(),\r\n\t\t\t\tx: 300,\r\n\t\t\t\ty: 80,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: colors[randomColor()],\r\n\t\t\t\t\twidth: 100,\r\n\t\t\t\t\theight: 140,\r\n\t\t\t\t\tleft: 20,\r\n\t\t\t\t\ttop: 20\r\n\t\t\t\t},\r\n\t\t\t\t// component: DragHandles,\r\n\t\t\t\tprops: [],\r\n\t\t\t\tchildren: []\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Child 3',\r\n\t\t\t\tid: safeid(),\r\n\t\t\t\tx: 420,\r\n\t\t\t\ty: 80,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: colors[randomColor()],\r\n\t\t\t\t\twidth: 100,\r\n\t\t\t\t\theight: 160,\r\n\t\t\t\t\tleft: 20,\r\n\t\t\t\t\ttop: 20\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// component: DragHandles,\r\n\t\t\t\tprops: [],\r\n\t\t\t\tchildren: []\r\n\t\t\t}\r\n\r\n\t\t\t// {\r\n\t\t\t// \tname: 'List 2',\r\n\t\t\t// \tcomponent: Resizable,\r\n\t\t\t// \tx: 0,\r\n\t\t\t// \ty: 0,\r\n\t\t\t// \tprops: [\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item A'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item B'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item C'\r\n\t\t\t// \t\t}\r\n\t\t\t// \t]\r\n\t\t\t// },\r\n\t\t\t// {\r\n\t\t\t// \tname: 'List 3',\r\n\t\t\t// \tcomponent: Draggable,\r\n\t\t\t// \tprops: [\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item A'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item B'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item C'\r\n\t\t\t// \t\t}\r\n\t\t\t// \t]\r\n\t\t\t// },\r\n\t\t\t// {\r\n\t\t\t// \tname: 'StickyNote',\r\n\t\t\t// \tcomponent: StickyNote,\r\n\t\t\t// \tx: 0,\r\n\t\t\t// \ty: 0,\r\n\t\t\t// \tprops: [\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item A'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item B'\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\tid: safeid(),\r\n\t\t\t// \t\t\ttext: 'Item C'\r\n\t\t\t// \t\t}\r\n\t\t\t// \t]\r\n\t\t\t// }\r\n\t\t]\r\n\t};\r\n\r\n\t// let data = {\r\n\t// \tid: safeid(),\r\n\t// \tname: 'Dashboard',\r\n\t// \tcomponent: Dash,\r\n\t// \tprops: { name: 'world' },\r\n\t// \tcolor: rectColor(),\r\n\t// \tchildren: [\r\n\t// \t\t{\r\n\t// \t\t\tid: safeid(),\r\n\t// \t\t\tname: 'List 1',\r\n\t// \t\t\tcolor: rectColor(),\r\n\t// \t\t\tx: 1,\r\n\t// \t\t\ty: 1,\r\n\t// \t\t\tcomponent: DragHandles,\r\n\t// \t\t\tprops: {\r\n\t// \t\t\t\titems: [\r\n\t// \t\t\t\t\t{ id: safeid(), name: 'A', color: rectColor(), children: [] },\r\n\t// \t\t\t\t\t{ id: safeid(), name: 'B', color: rectColor(), children: [] }\r\n\t// \t\t\t\t]\r\n\t// \t\t\t},\r\n\t// \t\t\tchildren: []\r\n\t// \t\t},\r\n\t// \t\t{\r\n\t// \t\t\tid: safeid(),\r\n\t// \t\t\tname: 'List 2',\r\n\t// \t\t\tcolor: rectColor(),\r\n\t// \t\t\tx: 200,\r\n\t// \t\t\ty: 0,\r\n\t// \t\t\tcomponent: DragHandles,\r\n\t// \t\t\tprops: {\r\n\t// \t\t\t\titems: [\r\n\t// \t\t\t\t\t{ id: safeid(), name: 'C', color: rectColor(), children: [] },\r\n\t// \t\t\t\t\t{ id: safeid(), name: 'D', color: rectColor(), children: [] }\r\n\t// \t\t\t\t]\r\n\t// \t\t\t}\r\n\t// \t\t}\r\n\t// \t],\r\n\t// \tlinks: []\r\n\t// };\r\n\r\n\tlet vh;\r\n\r\n\tonMount(() => {\r\n\t\thandleViewportSize();\r\n\t});\r\n\r\n\tfunction handleViewportSize(_) {\r\n\t\tvh = window.innerHeight * 0.01;\r\n\t\theight = window.innerHeight;\r\n\t\twidth = document?.body.clientWidth; // excludes scrollbar\r\n\t}\r\n</script>\r\n\r\n<svelte:window on:resize={handleViewportSize} />\r\n\r\n<div class=\"app\" style=\"--vh: {vh}px; height: calc(var(--vh, 1vh) * 100);\">\r\n\t{#if vh}\r\n\t\t<Sketch bind:data {width} {height} />\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.app {\r\n\t\theight: 100vh; /* Fallback for browsers that do not support Custom Properties */\r\n\t}\r\n</style>\r\n","<script>\n\timport { onMount } from 'svelte';\n\timport App from '$lib/App.svelte';\n\n\tlet mounted;\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n</script>\n\n{#if mounted}\n\t<App />\n{/if}\n"],"names":["size","Pointer","isPointerEvent","isTouchEvent","noop","PointerTracker","ctx","create_if_block","_b","_a","children","scale","pinchZoom","params"],"mappings":"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"}