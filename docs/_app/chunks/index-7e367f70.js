function kt(t,n){var e,r=1;t==null&&(t=0),n==null&&(n=0);function i(){var f,s=e.length,a,c=0,o=0;for(f=0;f<s;++f)a=e[f],c+=a.x,o+=a.y;for(c=(c/s-t)*r,o=(o/s-n)*r,f=0;f<s;++f)a=e[f],a.x-=c,a.y-=o}return i.initialize=function(f){e=f},i.x=function(f){return arguments.length?(t=+f,i):t},i.y=function(f){return arguments.length?(n=+f,i):n},i.strength=function(f){return arguments.length?(r=+f,i):r},i}function ot(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return q(this.cover(n,e),n,e,t)}function q(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,f=t._root,s={data:r},a=t._x0,c=t._y0,o=t._x1,v=t._y1,_,y,h,w,l,u,g,x;if(!f)return t._root=s,t;for(;f.length;)if((l=n>=(_=(a+o)/2))?a=_:o=_,(u=e>=(y=(c+v)/2))?c=y:v=y,i=f,!(f=f[g=u<<1|l]))return i[g]=s,t;if(h=+t._x.call(null,f.data),w=+t._y.call(null,f.data),n===h&&e===w)return s.next=f,i?i[g]=s:t._root=s,t;do i=i?i[g]=new Array(4):t._root=new Array(4),(l=n>=(_=(a+o)/2))?a=_:o=_,(u=e>=(y=(c+v)/2))?c=y:v=y;while((g=u<<1|l)===(x=(w>=y)<<1|h>=_));return i[x]=f,i[g]=s,t}function ft(t){var n,e,r=t.length,i,f,s=new Array(r),a=new Array(r),c=1/0,o=1/0,v=-1/0,_=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(f=+this._y.call(null,n))||(s[e]=i,a[e]=f,i<c&&(c=i),i>v&&(v=i),f<o&&(o=f),f>_&&(_=f));if(c>v||o>_)return this;for(this.cover(c,o).cover(v,_),e=0;e<r;++e)q(this,s[e],a[e],t[e]);return this}function at(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,f=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,f=(r=Math.floor(n))+1;else{for(var s=i-e||1,a=this._root,c,o;e>t||t>=i||r>n||n>=f;)switch(o=(n<r)<<1|t<e,c=new Array(4),c[o]=a,a=c,s*=2,o){case 0:i=e+s,f=r+s;break;case 1:e=i-s,f=r+s;break;case 2:i=e+s,r=f-s;break;case 3:e=i-s,r=f-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._y0=r,this._x1=i,this._y1=f,this}function ut(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function st(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function I(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function lt(t,n,e){var r,i=this._x0,f=this._y0,s,a,c,o,v=this._x1,_=this._y1,y=[],h=this._root,w,l;for(h&&y.push(new I(h,i,f,v,_)),e==null?e=1/0:(i=t-e,f=n-e,v=t+e,_=n+e,e*=e);w=y.pop();)if(!(!(h=w.node)||(s=w.x0)>v||(a=w.y0)>_||(c=w.x1)<i||(o=w.y1)<f))if(h.length){var u=(s+c)/2,g=(a+o)/2;y.push(new I(h[3],u,g,c,o),new I(h[2],s,g,u,o),new I(h[1],u,a,c,g),new I(h[0],s,a,u,g)),(l=(n>=g)<<1|t>=u)&&(w=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=w)}else{var x=t-+this._x.call(null,h.data),m=n-+this._y.call(null,h.data),p=x*x+m*m;if(p<e){var N=Math.sqrt(e=p);i=t-N,f=n-N,v=t+N,_=n+N,r=h.data}}return r}function ht(t){if(isNaN(v=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var n,e=this._root,r,i,f,s=this._x0,a=this._y0,c=this._x1,o=this._y1,v,_,y,h,w,l,u,g;if(!e)return this;if(e.length)for(;;){if((w=v>=(y=(s+c)/2))?s=y:c=y,(l=_>=(h=(a+o)/2))?a=h:o=h,n=e,!(e=e[u=l<<1|w]))return this;if(!e.length)break;(n[u+1&3]||n[u+2&3]||n[u+3&3])&&(r=n,g=u)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(f=e.next)&&delete e.next,i?(f?i.next=f:delete i.next,this):n?(f?n[u]=f:delete n[u],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[g]=e:this._root=e),this):(this._root=f,this)}function ct(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function gt(){return this._root}function vt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function yt(t){var n=[],e,r=this._root,i,f,s,a,c;for(r&&n.push(new I(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,f=e.x0,s=e.y0,a=e.x1,c=e.y1)&&r.length){var o=(f+a)/2,v=(s+c)/2;(i=r[3])&&n.push(new I(i,o,v,a,c)),(i=r[2])&&n.push(new I(i,f,v,o,c)),(i=r[1])&&n.push(new I(i,o,s,a,v)),(i=r[0])&&n.push(new I(i,f,s,o,v))}return this}function xt(t){var n=[],e=[],r;for(this._root&&n.push(new I(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var f,s=r.x0,a=r.y0,c=r.x1,o=r.y1,v=(s+c)/2,_=(a+o)/2;(f=i[0])&&n.push(new I(f,s,a,v,_)),(f=i[1])&&n.push(new I(f,v,a,c,_)),(f=i[2])&&n.push(new I(f,s,_,v,o)),(f=i[3])&&n.push(new I(f,v,_,c,o))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pt(t){return t[0]}function wt(t){return arguments.length?(this._x=t,this):this._x}function _t(t){return t[1]}function mt(t){return arguments.length?(this._y=t,this):this._y}function G(t,n,e){var r=new J(n==null?pt:n,e==null?_t:e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function J(t,n,e,r,i,f){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=f,this._root=void 0}function K(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var E=G.prototype=J.prototype;E.copy=function(){var t=new J(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=K(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=K(r));return t};E.add=ot;E.addAll=ft;E.cover=at;E.data=ut;E.extent=st;E.find=lt;E.remove=ht;E.removeAll=ct;E.root=gt;E.size=vt;E.visit=yt;E.visitAfter=xt;E.x=wt;E.y=mt;function d(t){return function(){return t}}function P(t){return(t()-.5)*1e-6}function Nt(t){return t.x+t.vx}function dt(t){return t.y+t.vy}function Ct(t){var n,e,r,i=1,f=1;typeof t!="function"&&(t=d(t==null?1:+t));function s(){for(var o,v=n.length,_,y,h,w,l,u,g=0;g<f;++g)for(_=G(n,Nt,dt).visitAfter(a),o=0;o<v;++o)y=n[o],l=e[y.index],u=l*l,h=y.x+y.vx,w=y.y+y.vy,_.visit(x);function x(m,p,N,z,T){var A=m.data,j=m.r,M=l+j;if(A){if(A.index>y.index){var b=h-A.x-A.vx,F=w-A.y-A.vy,D=b*b+F*F;D<M*M&&(b===0&&(b=P(r),D+=b*b),F===0&&(F=P(r),D+=F*F),D=(M-(D=Math.sqrt(D)))/D*i,y.vx+=(b*=D)*(M=(j*=j)/(u+j)),y.vy+=(F*=D)*M,A.vx-=b*(M=1-M),A.vy-=F*M)}return}return p>h+M||z<h-M||N>w+M||T<w-M}}function a(o){if(o.data)return o.r=e[o.data.index];for(var v=o.r=0;v<4;++v)o[v]&&o[v].r>o.r&&(o.r=o[v].r)}function c(){if(!!n){var o,v=n.length,_;for(e=new Array(v),o=0;o<v;++o)_=n[o],e[_.index]=+t(_,o,n)}}return s.initialize=function(o,v){n=o,r=v,c()},s.iterations=function(o){return arguments.length?(f=+o,s):f},s.strength=function(o){return arguments.length?(i=+o,s):i},s.radius=function(o){return arguments.length?(t=typeof o=="function"?o:d(+o),c(),s):t},s}function At(t){return t.index}function U(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function Lt(t){var n=At,e=_,r,i=d(30),f,s,a,c,o,v=1;t==null&&(t=[]);function _(u){return 1/Math.min(a[u.source.index],a[u.target.index])}function y(u){for(var g=0,x=t.length;g<v;++g)for(var m=0,p,N,z,T,A,j,M;m<x;++m)p=t[m],N=p.source,z=p.target,T=z.x+z.vx-N.x-N.vx||P(o),A=z.y+z.vy-N.y-N.vy||P(o),j=Math.sqrt(T*T+A*A),j=(j-f[m])/j*u*r[m],T*=j,A*=j,z.vx-=T*(M=c[m]),z.vy-=A*M,N.vx+=T*(M=1-M),N.vy+=A*M}function h(){if(!!s){var u,g=s.length,x=t.length,m=new Map(s.map((N,z)=>[n(N,z,s),N])),p;for(u=0,a=new Array(g);u<x;++u)p=t[u],p.index=u,typeof p.source!="object"&&(p.source=U(m,p.source)),typeof p.target!="object"&&(p.target=U(m,p.target)),a[p.source.index]=(a[p.source.index]||0)+1,a[p.target.index]=(a[p.target.index]||0)+1;for(u=0,c=new Array(x);u<x;++u)p=t[u],c[u]=a[p.source.index]/(a[p.source.index]+a[p.target.index]);r=new Array(x),w(),f=new Array(x),l()}}function w(){if(!!s)for(var u=0,g=t.length;u<g;++u)r[u]=+e(t[u],u,t)}function l(){if(!!s)for(var u=0,g=t.length;u<g;++u)f[u]=+i(t[u],u,t)}return y.initialize=function(u,g){s=u,o=g,h()},y.links=function(u){return arguments.length?(t=u,h(),y):t},y.id=function(u){return arguments.length?(n=u,y):n},y.iterations=function(u){return arguments.length?(v=+u,y):v},y.strength=function(u){return arguments.length?(e=typeof u=="function"?u:d(+u),w(),y):e},y.distance=function(u){return arguments.length?(i=typeof u=="function"?u:d(+u),l(),y):i},y}var Mt={value:()=>{}};function tt(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new L(e)}function L(t){this._=t}function zt(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}L.prototype=tt.prototype={constructor:L,on:function(t,n){var e=this._,r=zt(t+"",e),i,f=-1,s=r.length;if(arguments.length<2){for(;++f<s;)if((i=(t=r[f]).type)&&(i=It(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++f<s;)if(i=(t=r[f]).type)e[i]=V(e[i],t.name,n);else if(n==null)for(i in e)e[i]=V(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new L(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,f;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(f=this._[t],r=0,i=f.length;r<i;++r)f[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,f=r.length;i<f;++i)r[i].value.apply(n,e)}};function It(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function V(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Mt,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var O=0,B=0,$=0,nt=1e3,Q,k,R=0,S=0,X=0,C=typeof performance=="object"&&performance.now?performance:Date,et=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rt(){return S||(et(Et),S=C.now()+X)}function Et(){S=0}function Y(){this._call=this._time=this._next=null}Y.prototype=it.prototype={constructor:Y,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?rt():+e)+(n==null?0:+n),!this._next&&k!==this&&(k?k._next=this:Q=this,k=this),this._call=t,this._time=e,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};function it(t,n,e){var r=new Y;return r.restart(t,n,e),r}function Tt(){rt(),++O;for(var t=Q,n;t;)(n=S-t._time)>=0&&t._call.call(void 0,n),t=t._next;--O}function W(){S=(R=C.now())+X,O=B=0;try{Tt()}finally{O=0,Dt(),S=0}}function jt(){var t=C.now(),n=t-R;n>nt&&(X-=n,R=t)}function Dt(){for(var t,n=Q,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Q=e);k=t,H(r)}function H(t){if(!O){B&&(B=clearTimeout(B));var n=t-S;n>24?(t<1/0&&(B=setTimeout(W,t-C.now()-X)),$&&($=clearInterval($))):($||(R=C.now(),$=setInterval(jt,nt)),O=1,et(W))}}const bt=1664525,Ft=1013904223,Z=4294967296;function Pt(){let t=1;return()=>(t=(bt*t+Ft)%Z)/Z}function St(t){return t.x}function Ot(t){return t.y}var $t=10,Bt=Math.PI*(3-Math.sqrt(5));function Qt(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),f=0,s=.6,a=new Map,c=it(_),o=tt("tick","end"),v=Pt();t==null&&(t=[]);function _(){y(),o.call("tick",n),e<r&&(c.stop(),o.call("end",n))}function y(l){var u,g=t.length,x;l===void 0&&(l=1);for(var m=0;m<l;++m)for(e+=(f-e)*i,a.forEach(function(p){p(e)}),u=0;u<g;++u)x=t[u],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return n}function h(){for(var l=0,u=t.length,g;l<u;++l){if(g=t[l],g.index=l,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var x=$t*Math.sqrt(.5+l),m=l*Bt;g.x=x*Math.cos(m),g.y=x*Math.sin(m)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function w(l){return l.initialize&&l.initialize(t,v),l}return h(),n={tick:y,restart:function(){return c.restart(_),n},stop:function(){return c.stop(),n},nodes:function(l){return arguments.length?(t=l,h(),a.forEach(w),n):t},alpha:function(l){return arguments.length?(e=+l,n):e},alphaMin:function(l){return arguments.length?(r=+l,n):r},alphaDecay:function(l){return arguments.length?(i=+l,n):+i},alphaTarget:function(l){return arguments.length?(f=+l,n):f},velocityDecay:function(l){return arguments.length?(s=1-l,n):1-s},randomSource:function(l){return arguments.length?(v=l,a.forEach(w),n):v},force:function(l,u){return arguments.length>1?(u==null?a.delete(l):a.set(l,w(u)),n):a.get(l)},find:function(l,u,g){var x=0,m=t.length,p,N,z,T,A;for(g==null?g=1/0:g*=g,x=0;x<m;++x)T=t[x],p=l-T.x,N=u-T.y,z=p*p+N*N,z<g&&(A=T,g=z);return A},on:function(l,u){return arguments.length>1?(o.on(l,u),n):o.on(l)}}}function Rt(){var t,n,e,r,i=d(-30),f,s=1,a=1/0,c=.81;function o(h){var w,l=t.length,u=G(t,St,Ot).visitAfter(_);for(r=h,w=0;w<l;++w)n=t[w],u.visit(y)}function v(){if(!!t){var h,w=t.length,l;for(f=new Array(w),h=0;h<w;++h)l=t[h],f[l.index]=+i(l,h,t)}}function _(h){var w=0,l,u,g=0,x,m,p;if(h.length){for(x=m=p=0;p<4;++p)(l=h[p])&&(u=Math.abs(l.value))&&(w+=l.value,g+=u,x+=u*l.x,m+=u*l.y);h.x=x/g,h.y=m/g}else{l=h,l.x=l.data.x,l.y=l.data.y;do w+=f[l.data.index];while(l=l.next)}h.value=w}function y(h,w,l,u){if(!h.value)return!0;var g=h.x-n.x,x=h.y-n.y,m=u-w,p=g*g+x*x;if(m*m/c<p)return p<a&&(g===0&&(g=P(e),p+=g*g),x===0&&(x=P(e),p+=x*x),p<s&&(p=Math.sqrt(s*p)),n.vx+=g*h.value*r/p,n.vy+=x*h.value*r/p),!0;if(h.length||p>=a)return;(h.data!==n||h.next)&&(g===0&&(g=P(e),p+=g*g),x===0&&(x=P(e),p+=x*x),p<s&&(p=Math.sqrt(s*p)));do h.data!==n&&(m=f[h.data.index]*r/p,n.vx+=g*m,n.vy+=x*m);while(h=h.next)}return o.initialize=function(h,w){t=h,e=w,v()},o.strength=function(h){return arguments.length?(i=typeof h=="function"?h:d(+h),v(),o):i},o.distanceMin=function(h){return arguments.length?(s=h*h,o):Math.sqrt(s)},o.distanceMax=function(h){return arguments.length?(a=h*h,o):Math.sqrt(a)},o.theta=function(h){return arguments.length?(c=h*h,o):Math.sqrt(c)},o}function Xt(t,n,e){var r,i=d(.1),f,s;typeof t!="function"&&(t=d(+t)),n==null&&(n=0),e==null&&(e=0);function a(o){for(var v=0,_=r.length;v<_;++v){var y=r[v],h=y.x-n||1e-6,w=y.y-e||1e-6,l=Math.sqrt(h*h+w*w),u=(s[v]-l)*f[v]*o/l;y.vx+=h*u,y.vy+=w*u}}function c(){if(!!r){var o,v=r.length;for(f=new Array(v),s=new Array(v),o=0;o<v;++o)s[o]=+t(r[o],o,r),f[o]=isNaN(s[o])?0:+i(r[o],o,r)}}return a.initialize=function(o){r=o,c()},a.strength=function(o){return arguments.length?(i=typeof o=="function"?o:d(+o),c(),a):i},a.radius=function(o){return arguments.length?(t=typeof o=="function"?o:d(+o),c(),a):t},a.x=function(o){return arguments.length?(n=+o,a):n},a.y=function(o){return arguments.length?(e=+o,a):e},a}function Yt(t){var n=d(.1),e,r,i;typeof t!="function"&&(t=d(t==null?0:+t));function f(a){for(var c=0,o=e.length,v;c<o;++c)v=e[c],v.vx+=(i[c]-v.x)*r[c]*a}function s(){if(!!e){var a,c=e.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(e[a],a,e))?0:+n(e[a],a,e)}}return f.initialize=function(a){e=a,s()},f.strength=function(a){return arguments.length?(n=typeof a=="function"?a:d(+a),s(),f):n},f.x=function(a){return arguments.length?(t=typeof a=="function"?a:d(+a),s(),f):t},f}function Ht(t){var n=d(.1),e,r,i;typeof t!="function"&&(t=d(t==null?0:+t));function f(a){for(var c=0,o=e.length,v;c<o;++c)v=e[c],v.vy+=(i[c]-v.y)*r[c]*a}function s(){if(!!e){var a,c=e.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(e[a],a,e))?0:+n(e[a],a,e)}}return f.initialize=function(a){e=a,s()},f.strength=function(a){return arguments.length?(n=typeof a=="function"?a:d(+a),s(),f):n},f.y=function(a){return arguments.length?(t=typeof a=="function"?a:d(+a),s(),f):t},f}export{kt as forceCenter,Ct as forceCollide,Lt as forceLink,Rt as forceManyBody,Xt as forceRadial,Qt as forceSimulation,Yt as forceX,Ht as forceY};
