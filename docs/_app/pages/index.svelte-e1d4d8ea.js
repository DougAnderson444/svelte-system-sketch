var rt=Object.defineProperty,ot=Object.defineProperties;var ct=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Ne=(n,e,t)=>e in n?rt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Me=(n,e)=>{for(var t in e||(e={}))ft.call(e,t)&&Ne(n,t,e[t]);if(Ve)for(var t of Ve(e))ht.call(e,t)&&Ne(n,t,e[t]);return n},De=(n,e)=>ot(n,ct(e));import{L as ut,S as he,i as ue,s as de,e as B,t as ie,k as ce,c as P,a as j,h as le,m as fe,d as C,b as q,g as A,J as N,M as pe,N as dt,j as Ce,K as _e,D as nt,f as W,O as it,P as Ye,Q as He,v as We,R as I,T as Le,U as Te,V as lt,E as gt,W as qe,X as G,Y as ke,l as J,Z as ze,_ as Se,w as K,x as re,y as Q,$ as x,q as E,o as L,B as $,n as se,p as ae,a0 as U,a1 as _t,a2 as st,a3 as mt}from"../chunks/vendor-2eba8207.js";import{_ as pt}from"../chunks/preload-helper-3611e375.js";function me(n=16){return ut("abcdefghijklmnopqrztuvwxyz1234567890",n)()}function vt(n){return{name:"Name",id:me(),x:10,y:10,style:{backgroundColor:"#fee9004b",width:120,height:120,left:10,top:10},props:[],children:[]}}function yt(n){let e,t,i,a,s,l,r,o;return{c(){e=B("div"),t=ie("Scale "),i=ie(n[0]),a=ce(),s=B("div"),l=ie("+ Drag Me"),this.h()},l(f){e=P(f,"DIV",{class:!0});var c=j(e);t=le(c,"Scale "),i=le(c,n[0]),a=fe(c),s=P(c,"DIV",{class:!0});var g=j(s);l=le(g,"+ Drag Me"),g.forEach(C),c.forEach(C),this.h()},h(){q(s,"class","yellow svelte-1q5qz8t"),q(e,"class","pallette svelte-1q5qz8t")},m(f,c){A(f,e,c),N(e,t),N(e,i),N(e,a),N(e,s),N(s,l),r||(o=pe(dt.call(null,s,{Extras:{newContainer:n[1]},Operations:"copy",DataToOffer:{"item/plain":""}})),r=!0)},p(f,[c]){c&1&&Ce(i,f[0])},i:_e,o:_e,d(f){f&&C(e),r=!1,o()}}}function wt(n,e,t){let{children:i}=e,{scale:a=1}=e,s=vt();return n.$$set=l=>{"children"in l&&t(2,i=l.children),"scale"in l&&t(0,a=l.scale)},[a,s,i]}class bt extends he{constructor(e){super();ue(this,e,wt,yt,de,{children:2,scale:0})}}class kt{constructor({container:e}){this.container=e,this.vtm=this.createMatrix(),this.x=0,this.y=0,this.captureScale=1,this.stop=!1}clamp(e,t,i,a){let s=(this.container.clientWidth-a.width)/2,l=(this.container.clientHeight-a.height)/2,r=s*e+a.width*e-this.container.clientWidth,o=Math.min(this.vtm.e*1,0),f=Math.min(this.vtm.f*1,0),c=t>0?o:-(s*e),g=t>0?o:-r,b=this.vtm.e;b=Math.max(g,this.vtm.e),b=Math.min(c,b);let h=l*e+a.height*e-this.container.clientHeight,m=i>0?f:-(l*e),M=i>0?f:-h,H=this.vtm.f;H=Math.min(m,H),H=Math.max(H,M),this.vtm=this.createMatrix().translate(b,H).scale(Math.max(this.vtm.a,1))}createMatrix(){return new DOMMatrix}move(e,t,i,a,s){return this.vtm=this.createMatrix().translate(this.x-e,this.y-t).scale(this.vtm.a),this.vtm}scale(e,t,i,a,s,l,r,o,f){return this.vtm=this.createMatrix().translate(i.x,i.y).scale(e,t).translate(-i.x,-i.y).multiply(this.vtm),Math.min(Math.max(1,this.vtm.a),r),this.vtm}}class Mt{constructor(){this.touchA={clientX:0,clientY:0,t:0,velocity:1},this.touchB={clientX:0,clientY:0,t:0,velocity:1}}down(e,t){this.touchA={clientX:e.clientX,clientY:e.clientY,t:Date.now(),velocity:0},this.touchB={clientX:t.clientX,clientY:t.clientY,t:Date.now(),veloctiy:0}}calc(e,t){var i=e.clientX,a=e.clientY,s=Date.now(),l=i-t.clientX,r=a-t.clientY,o=s-t.t,f=Math.sqrt(l*l+r*r)/o;t.velocity=f,t.clientX=i,t.clientY=a,t.t=s}getVelocity(e,t){return this.calc(e,this.touchA),this.calc(t,this.touchB),this.touchA.velocity+this.touchB.velocity}}function Dt(n,e,t,i){var a=Math.min(t/n,i/e);return{width:n*a,height:e*a,ratio:a}}function Ae(n,e){return Math.hypot(n.pageX-e.pageX,n.pageY-e.pageY)}let Ie=!1,te={initX:0,initY:0,newX:0,newY:0},Z,V,Oe=new Mt,Ee={time:0,x:0,y:0};const Et=(n,e={})=>{var k;let t={scaling:!1,x1:0,x2:0,y1:0,y2:0,lastHypo:0,originX:0,originY:0,value:((k=e==null?void 0:e.scale)==null?void 0:k.value)||1,max:20},i=n.parentElement||document.body;i.style["touch-action"]="none",i.style["user-select"]="none",i.style.overflow="hidden",i.style.position="relative",n.style["touch-action"]="none",n.style["user-select"]="none",n.style.position="absolute",n.style.height="100%",n.style.width="100%",V=new kt({container:i}),l(),i.addEventListener("mousedown",O,{passive:!1}),i.addEventListener("touchstart",M,{passive:!1}),i.addEventListener("wheel",m,{passive:!1}),i.addEventListener("dragstart",s,{passive:!1}),i.addEventListener("drag",s,{passive:!1}),window.addEventListener("resize",r);const a=new MutationObserver((u,p)=>{for(const y of u)if(y.type==="attributes"){let F;const z=/(\w+)\(([^)]*)\)/g;for(;F=z.exec(n.style.transform);)F[1]=="scale"&&parseFloat(F[2]).toFixed(2)!=t.value.toFixed(2)&&(t.value=F[2])}});a.observe(n,{attributes:!0,childList:!1,subtree:!1});function s(u){return console.log("Removing drag listener"),!1}function l(){const{offsetWidth:u,offsetHeight:p}=n;Z=Dt(u,p,i.clientWidth,i.clientHeight)}function r(){l(),o(0,0),f(0,0),c()}function o(u,p){te.initX=u,te.initY=p,V.x=V.vtm.e,V.y=V.vtm.f}function f(u,p){if(t.scaling)return;let y=(i.clientWidth-Z.width*V.vtm.a)/2,F=(i.clientHeight-Z.height*V.vtm.a)/2;te.newX=te.initX-u,te.newY=te.initY-p;const z=V.move(te.newX,te.newY,y,F,Z);n.style.transform=`matrix(${z.a},${z.b},${z.c},${z.d},${z.e}, ${z.f})`}function c(){V.x-=te.newX,V.y-=te.newY,t.scaling=!1,t.lastHypo=0}function g(u,p){const y=[Math.min(u.pageX,p.pageX),Math.max(u.pageX,p.pageX)],F=[Math.min(u.pageY,p.pageY),Math.max(u.pageY,p.pageY)],d=(y[1]-y[0])/2+y[0],v=(F[1]-F[0])/2+F[0];t.originX=d,t.originY=v,t.lastHypo=Math.trunc(Ae(u,p))}function b(u,p){let y=V.vtm.a,F=y>1?y-1:t.max/2.5,z=y>1?-1:1;const d=1+F*z,w=d;let v=(i.clientWidth-Z.width*Math.max(d*y,1))/2,S=(i.clientHeight-Z.height*Math.max(d*y,1))/2;const T={x:u-i.clientWidth/2-i.offsetLeft,y:p-i.clientHeight/2-i.offsetTop},_=V.scale(d,w,T,v,S,Z,t.max,t.value*d,z);t.value=_.d,n.style.transform=`translate(${_.e}px, ${_.f}px) scale(${_.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{scale:t,matrix:V,origin:T}}))}function h(u,p,y){const F=Ae(u,p);let z=F/t.lastHypo;z=z>=1?1:-1;const d=Oe.getVelocity(u,p)||1,w=1+.1*d*z,v=w;let S=(i.clientWidth-Z.width*V.vtm.a)/2,T=(i.clientHeight-Z.height*V.vtm.a)/2;const _={x:t.originX-i.clientWidth/2-i.offsetLeft,y:t.originY-i.clientHeight/2-i.offsetTop},R=V.scale(w,v,_,S,T,Z,t.max,t.value*w,z);t.value=R.d,t.lastHypo=F,t.scaling=!0,n.style.transform=`translate(${R.e}px, ${R.f}px) scale(${R.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{style:n.style,scale:t,matrix:V,origin:_}}))}function m(u){u.preventDefault();const p=u.deltaY<0?1:-1,y=1+.1*p,F=y;let z=(i.clientWidth-Z.width*V.vtm.a)/2,d=(i.clientHeight-Z.height*V.vtm.a)/2;const w={x:u.pageX-i.clientWidth/2-i.offsetLeft,y:u.pageY-i.clientHeight/2-i.offsetTop};console.log({x:w.x,y:w.y});const v=V.scale(y,F,w,z,d,Z,t.max,t.value*y,p);t.value=v.d,n.style.transform=`translate(${v.e}px,${v.f}px) scale(${v.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{style:n.style,scale:t,matrix:V,origin:w}}))}function M(u){Ie=!0;const p=u.touches.length===2,[y,F]=u.touches;if(t.scaling=p,n.dispatchEvent(new CustomEvent("touchlog",{detail:{isMultiTouch:p}})),p)g(y,F),Oe.down(y,F);else{const{pageX:d,pageY:w}=y;var z=new Date().getTime();z-Ee.time<250&&Math.hypot(Ee.x-d,Ee.y-w)<=20?b(d,w):o(d,w),Ee={time:z,x:d,y:w}}n.removeEventListener("touchmove",H),n.removeEventListener("touchend",Y),n.addEventListener("touchmove",H),n.addEventListener("touchend",Y)}function H(u){if(t.scaling){const[p,y]=u.touches;h(p,y)}else f(u.touches[0].pageX,u.touches[0].pageY)}function Y(u){c(),n.removeEventListener("touchmove",H),n.removeEventListener("touchend",Y),n.removeEventListener("touchcancel",Y)}function O(u){if(i!==u.target&&n!==u.target)return;const{clientX:p,clientY:y}=u;Ie||(o(p,y),i.addEventListener("mousemove",X),i.addEventListener("mouseup",D))}function X({clientX:u,clientY:p}){f(u,p)}function D(){i.removeEventListener("mousemove",X),c()}return{update(u){console.log("Directive updated params",{params:u})},destroy(){n.removeEventListener("wheel",m),n.removeEventListener("mousedown",O),n.removeEventListener("touchstart",M),n.removeEventListener("dragstart",s),n.addEventListener("drag",s),window.removeEventListener("resize",r),a.disconnect()}}},be=nt({value:1}),Re=nt(null);function Ct(n){let e,t,i,a,s;return{c(){e=B("div"),this.h()},l(l){e=P(l,"DIV",{class:!0,style:!0}),j(e).forEach(C),this.h()},h(){q(e,"class",t="resize-handle "+n[2]+" svelte-ci56im"),W(e,"--size",Ht),W(e,"left",n[5]+"px"),W(e,"top",n[4]+"px"),W(e,"cursor",n[6])},m(l,r){A(l,e,r),n[20](e),a||(s=pe(i=it.call(null,e,{Extras:n[2],onDragStart:{x:n[0],y:n[1]},onDragMove:n[7],onDragEnd:n[8]})),a=!0)},p(l,[r]){r&4&&t!==(t="resize-handle "+l[2]+" svelte-ci56im")&&q(e,"class",t),r&32&&W(e,"left",l[5]+"px"),r&16&&W(e,"top",l[4]+"px"),i&&Ye(i.update)&&r&7&&i.update.call(null,{Extras:l[2],onDragStart:{x:l[0],y:l[1]},onDragMove:l[7],onDragEnd:l[8]})},i:_e,o:_e,d(l){l&&C(e),n[20](null),a=!1,s()}}}let Ht="1em";function zt(n,e,t){let i,a,s;He(n,be,v=>t(23,s=v));let{x:l}=e,{y:r}=e,{width:o}=e,{height:f}=e,{name:c}=e;console.log(c,{height:f});let{maxFrameHeight:g=2500}=e,{maxFrameWidth:b=2500}=e,{minFrameHeight:h=40}=e,{minFrameWidth:m=40}=e,{arenaWidth:M}=e,{arenaHeight:H}=e,{direction:Y}=e,{isDragging:O=!1}=e,{grid:X}=e,D,k=8,u=8;We(()=>{k=D?parseFloat(getComputedStyle(D).width.replace("px","")):8,u=D?parseFloat(getComputedStyle(D).height.replace("px","")):8});let p=Y=="nw"||Y=="se"?"nwse-resize":Y=="n"||Y=="s"?"ns-resize":Y=="ne"||Y=="sw"?"nesw-resize":"ew-resize";function y(v,S,T){switch(v){case"nw":case"w":case"sw":return S-k;case"n":case"s":return S+T/2;case"ne":case"e":case"se":return S+T+k}}function F(v,S,T){switch(v){case"nw":case"n":case"ne":return S-u;case"e":case"w":return S+T/2-u/2;case"sw":case"s":case"se":return S+T+u/2}}function z(v,S,T,_,R){switch(R){case"nw":case"w":case"sw":t(0,l=Math.max(0,l+o-b,Math.min(l+o-m,M,l+T/s.value))),t(9,o=o-T/s.value);break;case"ne":case"e":case"se":t(9,o=Math.max(0,l+m,Math.min(l+b,M,l+o+T/s.value))-l)}switch(R){case"nw":case"n":case"ne":t(1,r=Math.max(0,r+f-g,Math.min(r+f-h,H,r+_/s.value))),t(10,f=f-_/s.value);break;case"sw":case"s":case"se":t(10,f=Math.max(0,r+h,Math.min(r+g,H,r+f+_/s.value))-r)}}function d(v,S,T,_,R){t(11,O=!1),X&&(t(0,l=Math.floor(l/X)*X),t(1,r=Math.floor(r/X)*X),t(9,o=Math.floor(o/X)*X),t(10,f=Math.floor(f/X)*X))}function w(v){I[v?"unshift":"push"](()=>{D=v,t(3,D)})}return n.$$set=v=>{"x"in v&&t(0,l=v.x),"y"in v&&t(1,r=v.y),"width"in v&&t(9,o=v.width),"height"in v&&t(10,f=v.height),"name"in v&&t(12,c=v.name),"maxFrameHeight"in v&&t(13,g=v.maxFrameHeight),"maxFrameWidth"in v&&t(14,b=v.maxFrameWidth),"minFrameHeight"in v&&t(15,h=v.minFrameHeight),"minFrameWidth"in v&&t(16,m=v.minFrameWidth),"arenaWidth"in v&&t(17,M=v.arenaWidth),"arenaHeight"in v&&t(18,H=v.arenaHeight),"direction"in v&&t(2,Y=v.direction),"isDragging"in v&&t(11,O=v.isDragging),"grid"in v&&t(19,X=v.grid)},n.$$.update=()=>{n.$$.dirty&517&&t(5,i=y(Y,l,o)),n.$$.dirty&1030&&t(4,a=F(Y,r,f))},[l,r,Y,D,a,i,p,z,d,o,f,O,c,g,b,h,m,M,H,X,w]}class Wt extends he{constructor(e){super();ue(this,e,zt,Ct,de,{x:0,y:1,width:9,height:10,name:12,maxFrameHeight:13,maxFrameWidth:14,minFrameHeight:15,minFrameWidth:16,arenaWidth:17,arenaHeight:18,direction:2,isDragging:11,grid:19})}}function Xe(n,{enabled:e,handleUnselect:t}){const i=({target:s})=>{n!==s&&t()};function a({enabled:s}){s?window.addEventListener("click",i):window.removeEventListener("click",i)}return a({enabled:e}),{update:a,destroy(){window.removeEventListener("click",i)}}}function Lt(n){let e,t,i,a;return{c(){e=B("div"),this.h()},l(s){e=P(s,"DIV",{class:!0});var l=j(e);l.forEach(C),this.h()},h(){q(e,"class",t=qe(n[0])+" svelte-1708iua")},m(s,l){A(s,e,l),e.innerHTML=n[4],n[14](e),i||(a=[G(e,"input",n[5]),G(e,"dblclick",n[5])],i=!0)},p(s,l){l&16&&(e.innerHTML=s[4]),l&1&&t!==(t=qe(s[0])+" svelte-1708iua")&&q(e,"class",t)},d(s){s&&C(e),n[14](null),i=!1,ke(a)}}}function Ft(n){let e,t,i,a;return{c(){e=B("span"),t=ie(n[4]),this.h()},l(s){e=P(s,"SPAN",{contenteditable:!0,class:!0});var l=j(e);t=le(l,n[4]),l.forEach(C),this.h()},h(){q(e,"contenteditable",""),q(e,"class",n[0]),n[4]===void 0&&Le(()=>n[13].call(e))},m(s,l){A(s,e,l),N(e,t),n[12](e),n[4]!==void 0&&(e.innerHTML=n[4]),i||(a=[G(e,"keydown",n[6]),G(e,"blur",n[7]),G(e,"input",n[13])],i=!0)},p(s,l){l&16&&Ce(t,s[4]),l&1&&q(e,"class",s[0]),l&16&&s[4]!==e.innerHTML&&(e.innerHTML=s[4])},d(s){s&&C(e),n[12](null),i=!1,ke(a)}}}function Yt(n){let e,t;function i(l,r){return l[2]?Ft:Lt}let a=i(n),s=a(n);return{c(){e=B("div"),s.c(),this.h()},l(l){e=P(l,"DIV",{class:!0});var r=j(e);s.l(r),r.forEach(C),this.h()},h(){q(e,"class","svelte-1708iua"),Le(()=>n[15].call(e))},m(l,r){A(l,e,r),s.m(e,null),t=Te(e,n[15].bind(e))},p(l,[r]){a===(a=i(l))&&s?s.p(l,r):(s.d(1),s=a(l),s&&(s.c(),s.m(e,null)))},i:_e,o:_e,d(l){l&&C(e),s.d(),t()}}}function Xt(n,e,t){let{value:i=""}=e,{type:a="text"}=e,{placeholder:s=""}=e,{labelClasses:l=""}=e,{inputClasses:r=""}=e,o,f=!1,c,g=i;const b=lt();async function h(D){if(t(2,f=!f),f){console.log("toggle editing"),await gt(),c.focus();let u=document.createRange();console.log({inputEl:c}),u.setStart(c.firstChild,0),u.setEnd(c.firstChild,c.firstChild.length);var k=window.getSelection();k.removeAllRanges(),k.addRange(u)}else t(8,i=g),b("doneEditing")}const m=D=>{console.log("checking keyup"),D.keyCode===13&&(D.preventDefault(),c.blur())},M=D=>{i!=""&&i!=null?h():t(8,i="Enter Value")};function H(D){I[D?"unshift":"push"](()=>{c=D,t(3,c)})}function Y(){g=this.innerHTML,t(4,g)}function O(D){I[D?"unshift":"push"](()=>{c=D,t(3,c)})}function X(){o=this.offsetWidth,t(1,o)}return n.$$set=D=>{"value"in D&&t(8,i=D.value),"type"in D&&t(9,a=D.type),"placeholder"in D&&t(10,s=D.placeholder),"labelClasses"in D&&t(0,l=D.labelClasses),"inputClasses"in D&&t(11,r=D.inputClasses)},[l,o,f,c,g,h,m,M,i,a,s,r,H,Y,O,X]}class Tt extends he{constructor(e){super();ue(this,e,Xt,Yt,de,{value:8,type:9,placeholder:10,labelClasses:0,inputClasses:11})}}const ne=["#63B75A4B","#FEE9004B","#ff003b4b","#69f5dc4B","#FF9D484B","#7a00ff4B","#ff14f84b","#376bff4b"];function Be(n,e,t){const i=n.slice();return i[3]=e[t],i}function St(n){let e,t=ne,i=[];for(let a=0;a<t.length;a+=1)i[a]=Pe(Be(n,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=J()},l(a){for(let s=0;s<i.length;s+=1)i[s].l(a);e=J()},m(a,s){for(let l=0;l<i.length;l+=1)i[l].m(a,s);A(a,e,s)},p(a,s){if(s&1){t=ne;let l;for(l=0;l<t.length;l+=1){const r=Be(a,t,l);i[l]?i[l].p(r,s):(i[l]=Pe(r),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(a){Se(i,a),a&&C(e)}}}function Pe(n){let e,t,i;function a(...s){return n[2](n[3],...s)}return{c(){e=B("div"),this.h()},l(s){e=P(s,"DIV",{class:!0,style:!0}),j(e).forEach(C),this.h()},h(){q(e,"class","colorOption svelte-10ineey"),W(e,"background-color",n[3])},m(s,l){A(s,e,l),t||(i=G(e,"click",ze(a)),t=!0)},p(s,l){n=s},d(s){s&&C(e),t=!1,i()}}}function Vt(n){let e,t=ne&&St(n);return{c(){e=B("main"),t&&t.c(),this.h()},l(i){e=P(i,"MAIN",{class:!0});var a=j(e);t&&t.l(a),a.forEach(C),this.h()},h(){q(e,"class","svelte-10ineey")},m(i,a){A(i,e,a),t&&t.m(e,null)},p(i,[a]){ne&&t.p(i,a)},i:_e,o:_e,d(i){i&&C(e),t&&t.d()}}}function Nt(n,e,t){let{backgroundColor:i}=e;function a(l){t(1,i=l)}const s=(l,r)=>a(l);return n.$$set=l=>{"backgroundColor"in l&&t(1,i=l.backgroundColor)},[a,i,s]}class qt extends he{constructor(e){super();ue(this,e,Nt,Vt,de,{backgroundColor:1})}}function je(n){let e,t,i;function a(l){n[2](l)}let s={};return n[1]!==void 0&&(s.backgroundColor=n[1]),e=new qt({props:s}),I.push(()=>U(e,"backgroundColor",a)),{c(){K(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){Q(e,l,r),i=!0},p(l,r){const o={};!t&&r&2&&(t=!0,o.backgroundColor=l[1],x(()=>t=!1)),e.$set(o)},i(l){i||(E(e.$$.fragment,l),i=!0)},o(l){L(e.$$.fragment,l),i=!1},d(l){$(e,l)}}}function At(n){let e,t,i,a,s,l,r,o,f,c,g=n[1]&&je(n);return{c(){e=B("div"),g&&g.c(),t=ce(),i=B("span"),a=ie("\u21AA"),s=ce(),l=B("span"),r=ie("\u{1F5D1}\uFE0F"),this.h()},l(b){e=P(b,"DIV",{style:!0,class:!0});var h=j(e);g&&g.l(h),t=fe(h),i=P(h,"SPAN",{class:!0});var m=j(i);a=le(m,"\u21AA"),m.forEach(C),s=fe(h),l=P(h,"SPAN",{class:!0});var M=j(l);r=le(M,"\u{1F5D1}\uFE0F"),M.forEach(C),h.forEach(C),this.h()},h(){q(i,"class","connect svelte-sbpf1i"),q(l,"class","svelte-sbpf1i"),W(e,"left",n[0].x+n[0].style.width+"px"),W(e,"top",n[0].y+"px"),q(e,"class","svelte-sbpf1i")},m(b,h){A(b,e,h),g&&g.m(e,null),N(e,t),N(e,i),N(i,a),N(e,s),N(e,l),N(l,r),o=!0,f||(c=[G(i,"click",ze(Ot)),G(l,"click",ze(It))],f=!0)},p(b,[h]){b[1]?g?(g.p(b,h),h&2&&E(g,1)):(g=je(b),g.c(),E(g,1),g.m(e,t)):g&&(se(),L(g,1,1,()=>{g=null}),ae()),(!o||h&1)&&W(e,"left",b[0].x+b[0].style.width+"px"),(!o||h&1)&&W(e,"top",b[0].y+"px")},i(b){o||(E(g),o=!0)},o(b){L(g),o=!1},d(b){b&&C(e),g&&g.d(),f=!1,ke(c)}}}function It(n){}function Ot(n){}function Rt(n,e,t){var l;let{node:i}=e,a=((l=i==null?void 0:i.style)==null?void 0:l.backgroundColor)||"#fee9004b";console.log({backgroundColor:a});function s(r){a=r,t(1,a)}return n.$$set=r=>{"node"in r&&t(0,i=r.node)},n.$$.update=()=>{n.$$.dirty&3&&a&&t(0,i=De(Me({},i),{style:De(Me({},i.style),{backgroundColor:a})}))},[i,a,s]}class Bt extends he{constructor(e){super();ue(this,e,Rt,At,de,{node:0})}}function Ue(n,e,t){const i=n.slice();return i[30]=e[t],i}function xe(n,e,t){const i=n.slice();return i[33]=e[t],i[34]=e,i[35]=t,i}function Ze(n){var F,z;let e,t,i,a,s,l,r,o,f,c,g,b,h,m,M,H,Y;function O(d){n[15](d)}let X={};n[0].name!==void 0&&(X.value=n[0].name),i=new Tt({props:X}),I.push(()=>U(i,"value",O));function D(d){n[16](d)}var k=n[0].component;function u(d){let w={};return d[0].props!==void 0&&(w.props=d[0].props),{props:w}}k&&(l=new k(u(n)),I.push(()=>U(l,"props",D)));let p=((z=(F=n[0])==null?void 0:F.children)==null?void 0:z.length)>0&&Ge(n),y=n[4]&&n[7]&&Ke(n);return{c(){e=B("div"),t=B("div"),K(i.$$.fragment),s=ce(),l&&K(l.$$.fragment),o=ce(),p&&p.c(),h=ce(),y&&y.c(),m=J(),this.h()},l(d){e=P(d,"DIV",{class:!0,style:!0});var w=j(e);t=P(w,"DIV",{class:!0});var v=j(t);re(i.$$.fragment,v),v.forEach(C),s=fe(w),l&&re(l.$$.fragment,w),o=fe(w),p&&p.l(w),w.forEach(C),h=fe(d),y&&y.l(d),m=J(),this.h()},h(){var d,w,v,S,T,_;q(t,"class","title svelte-jjqozt"),q(e,"class","container svelte-jjqozt"),W(e,"position","absolute"),W(e,"left",n[0].x+"px"),W(e,"top",n[0].y+"px"),W(e,"width",((w=(d=n[0])==null?void 0:d.style)==null?void 0:w.width)+"px"),W(e,"height",((S=(v=n[0])==null?void 0:v.style)==null?void 0:S.height)+"px"),W(e,"background-color",((_=(T=n[0])==null?void 0:T.style)==null?void 0:_.backgroundColor)||"#fee9004b"),Le(()=>n[20].call(e))},m(d,w){A(d,e,w),N(e,t),Q(i,t,null),N(e,s),l&&Q(l,e,null),N(e,o),p&&p.m(e,null),n[19](e),f=Te(e,n[20].bind(e)),A(d,h,w),y&&y.m(d,w),A(d,m,w),M=!0,H||(Y=[pe(c=it.call(null,e,{onDragStart:{x:n[0].x,y:n[0].y},onDragMove:n[9],onDragEnd:n[10]})),pe(g=_t.call(null,e,{TypesToAccept:{"item/plain":"all"},onDrop:n[11]})),pe(b=Xe.call(null,e,{enabled:n[7],handleUnselect:n[12]})),G(e,"click",ze(n[13])),G(e,"focusout",n[12])],H=!0)},p(d,w){var T,_,R,ge,ee,ve,Fe,ye;const v={};!a&&w[0]&1&&(a=!0,v.value=d[0].name,x(()=>a=!1)),i.$set(v);const S={};if(!r&&w[0]&1&&(r=!0,S.props=d[0].props,x(()=>r=!1)),k!==(k=d[0].component)){if(l){se();const we=l;L(we.$$.fragment,1,0,()=>{$(we,1)}),ae()}k?(l=new k(u(d)),I.push(()=>U(l,"props",D)),K(l.$$.fragment),E(l.$$.fragment,1),Q(l,e,o)):l=null}else k&&l.$set(S);((_=(T=d[0])==null?void 0:T.children)==null?void 0:_.length)>0?p?(p.p(d,w),w[0]&1&&E(p,1)):(p=Ge(d),p.c(),E(p,1),p.m(e,null)):p&&(se(),L(p,1,1,()=>{p=null}),ae()),(!M||w[0]&1)&&W(e,"left",d[0].x+"px"),(!M||w[0]&1)&&W(e,"top",d[0].y+"px"),(!M||w[0]&1)&&W(e,"width",((ge=(R=d[0])==null?void 0:R.style)==null?void 0:ge.width)+"px"),(!M||w[0]&1)&&W(e,"height",((ve=(ee=d[0])==null?void 0:ee.style)==null?void 0:ve.height)+"px"),(!M||w[0]&1)&&W(e,"background-color",((ye=(Fe=d[0])==null?void 0:Fe.style)==null?void 0:ye.backgroundColor)||"#fee9004b"),c&&Ye(c.update)&&w[0]&1&&c.update.call(null,{onDragStart:{x:d[0].x,y:d[0].y},onDragMove:d[9],onDragEnd:d[10]}),b&&Ye(b.update)&&w[0]&128&&b.update.call(null,{enabled:d[7],handleUnselect:d[12]}),d[4]&&d[7]?y?(y.p(d,w),w[0]&144&&E(y,1)):(y=Ke(d),y.c(),E(y,1),y.m(m.parentNode,m)):y&&(se(),L(y,1,1,()=>{y=null}),ae())},i(d){M||(E(i.$$.fragment,d),l&&E(l.$$.fragment,d),E(p),E(y),M=!0)},o(d){L(i.$$.fragment,d),l&&L(l.$$.fragment,d),L(p),L(y),M=!1},d(d){d&&C(e),$(i),l&&$(l),p&&p.d(),n[19](null),f(),d&&C(h),y&&y.d(d),d&&C(m),H=!1,ke(Y)}}}function Ge(n){let e,t,i=n[0].children,a=[];for(let l=0;l<i.length;l+=1)a[l]=Je(xe(n,i,l));const s=l=>L(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=J()},l(l){for(let r=0;r<a.length;r+=1)a[r].l(l);e=J()},m(l,r){for(let o=0;o<a.length;o+=1)a[o].m(l,r);A(l,e,r),t=!0},p(l,r){if(r[0]&99){i=l[0].children;let o;for(o=0;o<i.length;o+=1){const f=xe(l,i,o);a[o]?(a[o].p(f,r),E(a[o],1)):(a[o]=Je(f),a[o].c(),E(a[o],1),a[o].m(e.parentNode,e))}for(se(),o=i.length;o<a.length;o+=1)s(o);ae()}},i(l){if(!t){for(let r=0;r<i.length;r+=1)E(a[r]);t=!0}},o(l){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)L(a[r]);t=!1},d(l){Se(a,l),l&&C(e)}}}function Je(n){let e,t,i,a;function s(o){n[17](o,n[33],n[34],n[35])}function l(o){n[18](o)}let r={arenaWidth:n[5],arenaHeight:n[6]};return n[33]!==void 0&&(r.node=n[33]),n[1]!==void 0&&(r.isDragging=n[1]),e=new at({props:r}),I.push(()=>U(e,"node",s)),I.push(()=>U(e,"isDragging",l)),{c(){K(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,f){Q(e,o,f),a=!0},p(o,f){n=o;const c={};f[0]&32&&(c.arenaWidth=n[5]),f[0]&64&&(c.arenaHeight=n[6]),!t&&f[0]&1&&(t=!0,c.node=n[33],x(()=>t=!1)),!i&&f[0]&2&&(i=!0,c.isDragging=n[1],x(()=>i=!1)),e.$set(c)},i(o){a||(E(e.$$.fragment,o),a=!0)},o(o){L(e.$$.fragment,o),a=!1},d(o){$(e,o)}}}function Ke(n){let e,t,i,a,s=n[8],l=[];for(let c=0;c<s.length;c+=1)l[c]=Qe(Ue(n,s,c));const r=c=>L(l[c],1,1,()=>{l[c]=null});function o(c){n[26](c)}let f={};return n[0]!==void 0&&(f.node=n[0]),t=new Bt({props:f}),I.push(()=>U(t,"node",o)),{c(){for(let c=0;c<l.length;c+=1)l[c].c();e=ce(),K(t.$$.fragment)},l(c){for(let g=0;g<l.length;g+=1)l[g].l(c);e=fe(c),re(t.$$.fragment,c)},m(c,g){for(let b=0;b<l.length;b+=1)l[b].m(c,g);A(c,e,g),Q(t,c,g),a=!0},p(c,g){if(g[0]&271){s=c[8];let h;for(h=0;h<s.length;h+=1){const m=Ue(c,s,h);l[h]?(l[h].p(m,g),E(l[h],1)):(l[h]=Qe(m),l[h].c(),E(l[h],1),l[h].m(e.parentNode,e))}for(se(),h=s.length;h<l.length;h+=1)r(h);ae()}const b={};!i&&g[0]&1&&(i=!0,b.node=c[0],x(()=>i=!1)),t.$set(b)},i(c){if(!a){for(let g=0;g<s.length;g+=1)E(l[g]);E(t.$$.fragment,c),a=!0}},o(c){l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)L(l[g]);L(t.$$.fragment,c),a=!1},d(c){Se(l,c),c&&C(e),$(t,c)}}}function Qe(n){let e,t,i,a,s,l,r;function o(m){n[21](m)}function f(m){n[22](m)}function c(m){n[23](m)}function g(m){n[24](m)}function b(m){n[25](m)}let h={name:n[0].name,maxFrameWidth:Ut,minFrameWidth:jt,arenaWidth:n[3],arenaHeight:n[2],maxFrameHeight:Zt,minFrameHeight:xt,direction:n[30],grid:oe};return n[0].x!==void 0&&(h.x=n[0].x),n[0].y!==void 0&&(h.y=n[0].y),n[0].style.width!==void 0&&(h.width=n[0].style.width),n[0].style.height!==void 0&&(h.height=n[0].style.height),n[1]!==void 0&&(h.isDragging=n[1]),e=new Wt({props:h}),I.push(()=>U(e,"x",o)),I.push(()=>U(e,"y",f)),I.push(()=>U(e,"width",c)),I.push(()=>U(e,"height",g)),I.push(()=>U(e,"isDragging",b)),{c(){K(e.$$.fragment)},l(m){re(e.$$.fragment,m)},m(m,M){Q(e,m,M),r=!0},p(m,M){const H={};M[0]&1&&(H.name=m[0].name),M[0]&8&&(H.arenaWidth=m[3]),M[0]&4&&(H.arenaHeight=m[2]),!t&&M[0]&1&&(t=!0,H.x=m[0].x,x(()=>t=!1)),!i&&M[0]&1&&(i=!0,H.y=m[0].y,x(()=>i=!1)),!a&&M[0]&1&&(a=!0,H.width=m[0].style.width,x(()=>a=!1)),!s&&M[0]&1&&(s=!0,H.height=m[0].style.height,x(()=>s=!1)),!l&&M[0]&2&&(l=!0,H.isDragging=m[1],x(()=>l=!1)),e.$set(H)},i(m){r||(E(e.$$.fragment,m),r=!0)},o(m){L(e.$$.fragment,m),r=!1},d(m){$(e,m)}}}function Pt(n){let e,t,i,a=n[0]&&document&&Xe&&Ze(n);return{c(){e=ce(),a&&a.c(),t=J()},l(s){e=fe(s),a&&a.l(s),t=J()},m(s,l){A(s,e,l),a&&a.m(s,l),A(s,t,l),i=!0},p(s,l){s[0]&&document&&Xe?a?(a.p(s,l),l[0]&1&&E(a,1)):(a=Ze(s),a.c(),E(a,1),a.m(t.parentNode,t)):a&&(se(),L(a,1,1,()=>{a=null}),ae())},i(s){i||(E(a),i=!0)},o(s){L(a),i=!1},d(s){s&&C(e),a&&a.d(s),s&&C(t)}}}let oe=20,jt=40,Ut=2500,xt=20,Zt=2500;function Gt(n,e,t){let i,a;He(n,Re,_=>t(14,i=_)),He(n,be,_=>t(27,a=_)),We(async()=>{pt(()=>import("../chunks/svelte-drag-drop-touch.esm-bd0b41cd.js"),[])});let{node:s}=e,{arenaHeight:l}=e,{arenaWidth:r}=e,{isDragging:o=!1}=e;lt();let f,c,g,b,h=["nw","w","sw","ne","e","se","n","s"];function m(_,R,ge,ee){t(0,s.x=s.x+ge/a.value,s),t(0,s.y=s.y+ee/a.value,s),Y()}function M(_,R,ge,ee,ve){t(1,o=!1),t(0,s.x=Math.round(s.x/oe)*oe,s),t(0,s.y=Math.round(s.y/oe)*oe,s),t(0,s.style.width=Math.round(s.style.width/oe)*oe,s),t(0,s.style.height=Math.round(s.style.height/oe)*oe,s)}function H(_,R,ge,ee,ve,Fe){let ye;for(let we in ee)ee.hasOwnProperty(we)&&(ye=we);return t(0,s.children=[...s.children,De(Me({},ve.newContainer),{x:_/a.value,y:R/a.value})],s),ye}function Y(){s.x<0&&t(0,s.x=0,s),s.x+s.style.width>=r&&t(0,s.x-=s.x+s.style.width-r,s),s.y<0&&t(0,s.y=0,s),s.y+s.style.height>=l&&t(0,s.y-=s.y+s.style.height-l,s)}function O(){t(7,b=!1)}function X(_){console.log("Clicked"),f.focus(),st(Re,i=f,i),t(7,b=!0)}function D(_){n.$$.not_equal(s.name,_)&&(s.name=_,t(0,s))}function k(_){n.$$.not_equal(s.props,_)&&(s.props=_,t(0,s))}function u(_,R,ge,ee){ge[ee]=_,t(0,s)}function p(_){o=_,t(1,o)}function y(_){I[_?"unshift":"push"](()=>{f=_,t(4,f)})}function F(){c=this.clientWidth,g=this.clientHeight,t(5,c),t(6,g)}function z(_){n.$$.not_equal(s.x,_)&&(s.x=_,t(0,s))}function d(_){n.$$.not_equal(s.y,_)&&(s.y=_,t(0,s))}function w(_){n.$$.not_equal(s.style.width,_)&&(s.style.width=_,t(0,s))}function v(_){n.$$.not_equal(s.style.height,_)&&(s.style.height=_,t(0,s))}function S(_){o=_,t(1,o)}function T(_){s=_,t(0,s)}return n.$$set=_=>{"node"in _&&t(0,s=_.node),"arenaHeight"in _&&t(2,l=_.arenaHeight),"arenaWidth"in _&&t(3,r=_.arenaWidth),"isDragging"in _&&t(1,o=_.isDragging)},n.$$.update=()=>{n.$$.dirty[0]&12&&(r||l)&&Y(),n.$$.dirty[0]&16400&&i!=f&&O()},[s,o,l,r,f,c,g,b,h,m,M,H,O,X,i,D,k,u,p,y,F,z,d,w,v,S,T]}class at extends he{constructor(e){super();ue(this,e,Gt,Pt,de,{node:0,arenaHeight:2,arenaWidth:3,isDragging:1},null,[-1,-1])}}function $e(n){let e,t,i,a,s,l,r,o,f,c,g,b,h,m,M,H;function Y(k){n[7](k)}let O={};n[5].value!==void 0&&(O.scale=n[5].value),t=new bt({props:O}),I.push(()=>U(t,"scale",Y));function X(k){n[8](k)}let D={arenaWidth:n[3]*100,arenaHeight:n[4]*100};return n[0]!==void 0&&(D.node=n[0]),c=new at({props:D}),I.push(()=>U(c,"node",X)),{c(){e=B("div"),K(t.$$.fragment),a=ce(),s=ie(n[1]),l=ie("px x "),r=ie(n[2]),o=ie(`px\r
\r
		`),f=B("div"),K(c.$$.fragment),this.h()},l(k){e=P(k,"DIV",{class:!0,style:!0});var u=j(e);re(t.$$.fragment,u),a=fe(u),s=le(u,n[1]),l=le(u,"px x "),r=le(u,n[2]),o=le(u,`px\r
\r
		`),f=P(u,"DIV",{class:!0});var p=j(f);re(c.$$.fragment,p),p.forEach(C),u.forEach(C),this.h()},h(){q(f,"class","zoomable flexbox svelte-4dy2ei"),q(e,"class","canvas svelte-4dy2ei"),W(e,"height",n[2]+"px"),W(e,"width",n[1]+"px"),Le(()=>n[9].call(e))},m(k,u){A(k,e,u),Q(t,e,null),N(e,a),N(e,s),N(e,l),N(e,r),N(e,o),N(e,f),Q(c,f,null),h=Te(e,n[9].bind(e)),m=!0,M||(H=[pe(b=Et.call(null,f)),G(f,"zoomed",n[6])],M=!0)},p(k,u){const p={};!i&&u&32&&(i=!0,p.scale=k[5].value,x(()=>i=!1)),t.$set(p),(!m||u&2)&&Ce(s,k[1]),(!m||u&4)&&Ce(r,k[2]);const y={};u&8&&(y.arenaWidth=k[3]*100),u&16&&(y.arenaHeight=k[4]*100),!g&&u&1&&(g=!0,y.node=k[0],x(()=>g=!1)),c.$set(y),(!m||u&4)&&W(e,"height",k[2]+"px"),(!m||u&2)&&W(e,"width",k[1]+"px")},i(k){m||(E(t.$$.fragment,k),E(c.$$.fragment,k),m=!0)},o(k){L(t.$$.fragment,k),L(c.$$.fragment,k),m=!1},d(k){k&&C(e),$(t),$(c),h(),M=!1,ke(H)}}}function Jt(n){let e,t,i=n[5]&&$e(n);return{c(){i&&i.c(),e=J()},l(a){i&&i.l(a),e=J()},m(a,s){i&&i.m(a,s),A(a,e,s),t=!0},p(a,[s]){a[5]?i?(i.p(a,s),s&32&&E(i,1)):(i=$e(a),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(se(),L(i,1,1,()=>{i=null}),ae())},i(a){t||(E(i),t=!0)},o(a){L(i),t=!1},d(a){i&&i.d(a),a&&C(e)}}}function Kt(n,e,t){let i;He(n,be,h=>t(5,i=h));let{data:a}=e,{width:s=400}=e,{height:l=600}=e,r,o;function f(h){st(be,i=h.detail.scale,i)}function c(h){n.$$.not_equal(i.value,h)&&(i.value=h,be.set(i))}function g(h){a=h,t(0,a)}function b(){r=this.clientWidth,o=this.clientHeight,t(3,r),t(4,o)}return n.$$set=h=>{"data"in h&&t(0,a=h.data),"width"in h&&t(1,s=h.width),"height"in h&&t(2,l=h.height)},[a,s,l,r,o,i,f,c,g,b]}class Qt extends he{constructor(e){super();ue(this,e,Kt,Jt,de,{data:0,width:1,height:2})}}const{window:$t}=mt;function et(n){let e,t,i;function a(l){n[5](l)}let s={width:n[0],height:n[1]};return n[2]!==void 0&&(s.data=n[2]),e=new Qt({props:s}),I.push(()=>U(e,"data",a)),{c(){K(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){Q(e,l,r),i=!0},p(l,r){const o={};r&1&&(o.width=l[0]),r&2&&(o.height=l[1]),!t&&r&4&&(t=!0,o.data=l[2],x(()=>t=!1)),e.$set(o)},i(l){i||(E(e.$$.fragment,l),i=!0)},o(l){L(e.$$.fragment,l),i=!1},d(l){$(e,l)}}}function en(n){let e,t,i,a,s=n[3]&&et(n);return{c(){e=B("div"),s&&s.c(),this.h()},l(l){e=P(l,"DIV",{class:!0,style:!0});var r=j(e);s&&s.l(r),r.forEach(C),this.h()},h(){q(e,"class","app svelte-16vwtwf"),W(e,"--vh",n[3]+"px"),W(e,"height","calc(var(--vh, 1vh) * 100)")},m(l,r){A(l,e,r),s&&s.m(e,null),t=!0,i||(a=G($t,"resize",n[4]),i=!0)},p(l,[r]){l[3]?s?(s.p(l,r),r&8&&E(s,1)):(s=et(l),s.c(),E(s,1),s.m(e,null)):s&&(se(),L(s,1,1,()=>{s=null}),ae()),(!t||r&8)&&W(e,"--vh",l[3]+"px")},i(l){t||(E(s),t=!0)},o(l){L(s),t=!1},d(l){l&&C(e),s&&s.d(),i=!1,a()}}}function tn(n,e,t){let i,a;function s(){return Math.floor(Math.random()*10%ne.length)}let l={name:"My Dashboard of Lists",id:me(),x:20,y:20,style:{backgroundColor:ne[s()],width:600,left:20,top:20,height:800},children:[{name:"Child 1",id:me(),x:60,y:80,style:{backgroundColor:ne[s()],width:220,height:520,left:20,top:20},props:[],children:[{name:"Child A",id:me(),x:20,y:80,style:{backgroundColor:ne[s()],width:120,height:120,left:20,top:20},props:[],children:[]}]},{name:"Child 2",id:me(),x:300,y:80,style:{backgroundColor:ne[s()],width:100,height:140,left:20,top:20},props:[],children:[]},{name:"Child 3",id:me(),x:420,y:80,style:{backgroundColor:ne[s()],width:100,height:160,left:20,top:20},props:[],children:[]}]},r;We(()=>{o()});function o(c){t(3,r=window.innerHeight*.01),t(1,a=window.innerHeight),t(0,i=document==null?void 0:document.body.clientWidth)}function f(c){l=c,t(2,l)}return[i,a,l,r,o,f]}class nn extends he{constructor(e){super();ue(this,e,tn,en,de,{})}}function tt(n){let e,t;return e=new nn({}),{c(){K(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,a){Q(e,i,a),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){L(e.$$.fragment,i),t=!1},d(i){$(e,i)}}}function ln(n){let e,t,i=n[0]&&tt();return{c(){i&&i.c(),e=J()},l(a){i&&i.l(a),e=J()},m(a,s){i&&i.m(a,s),A(a,e,s),t=!0},p(a,[s]){a[0]?i?s&1&&E(i,1):(i=tt(),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(se(),L(i,1,1,()=>{i=null}),ae())},i(a){t||(E(i),t=!0)},o(a){L(i),t=!1},d(a){i&&i.d(a),a&&C(e)}}}function sn(n,e,t){let i;return We(()=>{t(0,i=!0)}),[i]}class cn extends he{constructor(e){super();ue(this,e,sn,ln,de,{})}}export{cn as default};
