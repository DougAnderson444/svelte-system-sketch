var at=Object.defineProperty,rt=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var Ne=(n,e,t)=>e in n?at(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Me=(n,e)=>{for(var t in e||(e={}))ct.call(e,t)&&Ne(n,t,e[t]);if(Ve)for(var t of Ve(e))ft.call(e,t)&&Ne(n,t,e[t]);return n},De=(n,e)=>rt(n,ot(e));import{L as ht,S as he,i as ue,s as de,e as B,t as ie,k as re,c as P,a as j,h as le,m as oe,d as H,b as q,g as A,J as N,M as pe,N as ut,j as He,K as _e,D as tt,f as L,O as nt,P as Ye,Q as Ce,v as We,R as O,T as Le,U as Te,V as it,E as dt,W as qe,X as G,Y as ke,l as J,Z as ze,_ as Se,$ as x,w as K,x as se,y as Q,a0 as U,q as C,o as Y,B as $,a1 as gt,n as ce,p as fe,a2 as lt,a3 as _t}from"../chunks/vendor-e4fe7460.js";import{_ as mt}from"../chunks/preload-helper-3611e375.js";function me(n=16){return ht("abcdefghijklmnopqrztuvwxyz1234567890",n)()}function pt(n){return{name:"Name",id:me(),x:10,y:10,style:{backgroundColor:"#fee9004b",width:120,height:120,left:10,top:10},props:[],children:[]}}function vt(n){let e,t,i,a,l,s,r,o;return{c(){e=B("div"),t=ie("Scale "),i=ie(n[0]),a=re(),l=B("div"),s=ie("+ Drag Me"),this.h()},l(f){e=P(f,"DIV",{class:!0});var c=j(e);t=le(c,"Scale "),i=le(c,n[0]),a=oe(c),l=P(c,"DIV",{class:!0});var w=j(l);s=le(w,"+ Drag Me"),w.forEach(H),c.forEach(H),this.h()},h(){q(l,"class","yellow svelte-1q5qz8t"),q(e,"class","pallette svelte-1q5qz8t")},m(f,c){A(f,e,c),N(e,t),N(e,i),N(e,a),N(e,l),N(l,s),r||(o=pe(ut.call(null,l,{Extras:{newContainer:n[1]},Operations:"copy",DataToOffer:{"item/plain":""}})),r=!0)},p(f,[c]){c&1&&He(i,f[0])},i:_e,o:_e,d(f){f&&H(e),r=!1,o()}}}function yt(n,e,t){let{children:i}=e,{scale:a=1}=e,l=pt();return n.$$set=s=>{"children"in s&&t(2,i=s.children),"scale"in s&&t(0,a=s.scale)},[a,l,i]}class wt extends he{constructor(e){super();ue(this,e,yt,vt,de,{children:2,scale:0})}}class bt{constructor({container:e}){this.container=e,this.vtm=this.createMatrix(),this.x=0,this.y=0,this.captureScale=1,this.stop=!1}clamp(e,t,i,a){let l=(this.container.clientWidth-a.width)/2,s=(this.container.clientHeight-a.height)/2,r=l*e+a.width*e-this.container.clientWidth,o=Math.min(this.vtm.e*1,0),f=Math.min(this.vtm.f*1,0),c=t>0?o:-(l*e),w=t>0?o:-r,E=this.vtm.e;E=Math.max(w,this.vtm.e),E=Math.min(c,E);let _=s*e+a.height*e-this.container.clientHeight,g=i>0?f:-(s*e),y=i>0?f:-_,k=this.vtm.f;k=Math.min(g,k),k=Math.max(k,y),this.vtm=this.createMatrix().translate(E,k).scale(Math.max(this.vtm.a,1))}createMatrix(){return new DOMMatrix}move(e,t,i,a,l){return this.vtm=this.createMatrix().translate(this.x-e,this.y-t).scale(this.vtm.a),this.vtm}scale(e,t,i,a,l,s,r,o,f){return this.vtm=this.createMatrix().translate(i.x,i.y).scale(e,t).translate(-i.x,-i.y).multiply(this.vtm),Math.min(Math.max(1,this.vtm.a),r),this.vtm}}class kt{constructor(){this.touchA={clientX:0,clientY:0,t:0,velocity:1},this.touchB={clientX:0,clientY:0,t:0,velocity:1}}down(e,t){this.touchA={clientX:e.clientX,clientY:e.clientY,t:Date.now(),velocity:0},this.touchB={clientX:t.clientX,clientY:t.clientY,t:Date.now(),veloctiy:0}}calc(e,t){var i=e.clientX,a=e.clientY,l=Date.now(),s=i-t.clientX,r=a-t.clientY,o=l-t.t,f=Math.sqrt(s*s+r*r)/o;t.velocity=f,t.clientX=i,t.clientY=a,t.t=l}getVelocity(e,t){return this.calc(e,this.touchA),this.calc(t,this.touchB),this.touchA.velocity+this.touchB.velocity}}function Mt(n,e,t,i){var a=Math.min(t/n,i/e);return{width:n*a,height:e*a,ratio:a}}function Ae(n,e){return Math.hypot(n.pageX-e.pageX,n.pageY-e.pageY)}let Ie=!1,te={initX:0,initY:0,newX:0,newY:0},Z,V,Oe=new kt,Ee={time:0,x:0,y:0};const Dt=(n,e={})=>{var M;let t={scaling:!1,x1:0,x2:0,y1:0,y2:0,lastHypo:0,originX:0,originY:0,value:((M=e==null?void 0:e.scale)==null?void 0:M.value)||1,max:20},i=n.parentElement||document.body;i.style["touch-action"]="none",i.style["user-select"]="none",i.style.overflow="hidden",i.style.position="relative",n.style["touch-action"]="none",n.style["user-select"]="none",n.style.position="absolute",n.style.height="100%",n.style.width="100%",V=new bt({container:i}),s(),i.addEventListener("mousedown",I,{passive:!1}),i.addEventListener("touchstart",y,{passive:!1}),i.addEventListener("wheel",g,{passive:!1}),i.addEventListener("dragstart",l,{passive:!1}),i.addEventListener("drag",l,{passive:!1}),window.addEventListener("resize",r);const a=new MutationObserver((h,m)=>{for(const v of h)if(v.type==="attributes"){let F;const W=/(\w+)\(([^)]*)\)/g;for(;F=W.exec(n.style.transform);)F[1]=="scale"&&parseFloat(F[2]).toFixed(2)!=t.value.toFixed(2)&&(t.value=F[2])}});a.observe(n,{attributes:!0,childList:!1,subtree:!1});function l(h){return console.log("Removing drag listener"),!1}function s(){const{offsetWidth:h,offsetHeight:m}=n;Z=Mt(h,m,i.clientWidth,i.clientHeight)}function r(){s(),o(0,0),f(0,0),c()}function o(h,m){te.initX=h,te.initY=m,V.x=V.vtm.e,V.y=V.vtm.f}function f(h,m){if(t.scaling)return;let v=(i.clientWidth-Z.width*V.vtm.a)/2,F=(i.clientHeight-Z.height*V.vtm.a)/2;te.newX=te.initX-h,te.newY=te.initY-m;const W=V.move(te.newX,te.newY,v,F,Z);n.style.transform=`matrix(${W.a},${W.b},${W.c},${W.d},${W.e}, ${W.f})`}function c(){V.x-=te.newX,V.y-=te.newY,t.scaling=!1,t.lastHypo=0}function w(h,m){const v=[Math.min(h.pageX,m.pageX),Math.max(h.pageX,m.pageX)],F=[Math.min(h.pageY,m.pageY),Math.max(h.pageY,m.pageY)],u=(v[1]-v[0])/2+v[0],p=(F[1]-F[0])/2+F[0];t.originX=u,t.originY=p,t.lastHypo=Math.trunc(Ae(h,m))}function E(h,m){let v=V.vtm.a,F=v>1?v-1:t.max/2.5,W=v>1?-1:1;const u=1+F*W,b=u;let p=(i.clientWidth-Z.width*Math.max(u*v,1))/2,S=(i.clientHeight-Z.height*Math.max(u*v,1))/2;const T={x:h-i.clientWidth/2-i.offsetLeft,y:m-i.clientHeight/2-i.offsetTop},d=V.scale(u,b,T,p,S,Z,t.max,t.value*u,W);t.value=d.d,n.style.transform=`translate(${d.e}px, ${d.f}px) scale(${d.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{scale:t,matrix:V,origin:T}}))}function _(h,m,v){const F=Ae(h,m);let W=F/t.lastHypo;W=W>=1?1:-1;const u=Oe.getVelocity(h,m)||1,b=1+.1*u*W,p=b;let S=(i.clientWidth-Z.width*V.vtm.a)/2,T=(i.clientHeight-Z.height*V.vtm.a)/2;const d={x:t.originX-i.clientWidth/2-i.offsetLeft,y:t.originY-i.clientHeight/2-i.offsetTop},R=V.scale(b,p,d,S,T,Z,t.max,t.value*b,W);t.value=R.d,t.lastHypo=F,t.scaling=!0,n.style.transform=`translate(${R.e}px, ${R.f}px) scale(${R.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{style:n.style,scale:t,matrix:V,origin:d}}))}function g(h){h.preventDefault();const m=h.deltaY<0?1:-1,v=1+.1*m,F=v;let W=(i.clientWidth-Z.width*V.vtm.a)/2,u=(i.clientHeight-Z.height*V.vtm.a)/2;const b={x:h.pageX-i.clientWidth/2-i.offsetLeft,y:h.pageY-i.clientHeight/2-i.offsetTop},p=V.scale(v,F,b,W,u,Z,t.max,t.value*v,m);t.value=p.d,n.style.transform=`translate(${p.e}px,${p.f}px) scale(${p.a})`,n.dispatchEvent(new CustomEvent("zoomed",{detail:{style:n.style,scale:t,matrix:V,origin:b}}))}function y(h){Ie=!0;const m=h.touches.length===2,[v,F]=h.touches;if(t.scaling=m,n.dispatchEvent(new CustomEvent("touchlog",{detail:{isMultiTouch:m}})),m)w(v,F),Oe.down(v,F);else{const{pageX:u,pageY:b}=v;var W=new Date().getTime();W-Ee.time<250&&Math.hypot(Ee.x-u,Ee.y-b)<=20?E(u,b):o(u,b),Ee={time:W,x:u,y:b}}n.removeEventListener("touchmove",k),n.removeEventListener("touchend",z),n.addEventListener("touchmove",k),n.addEventListener("touchend",z)}function k(h){if(t.scaling){const[m,v]=h.touches;_(m,v)}else f(h.touches[0].pageX,h.touches[0].pageY)}function z(h){c(),n.removeEventListener("touchmove",k),n.removeEventListener("touchend",z),n.removeEventListener("touchcancel",z)}function I(h){if(i!==h.target&&n!==h.target)return;const{clientX:m,clientY:v}=h;Ie||(o(m,v),i.addEventListener("mousemove",X),i.addEventListener("mouseup",D))}function X({clientX:h,clientY:m}){f(h,m)}function D(){i.removeEventListener("mousemove",X),c()}return{update(h){console.log("Directive updated params",{params:h})},destroy(){n.removeEventListener("wheel",g),n.removeEventListener("mousedown",I),n.removeEventListener("touchstart",y),n.removeEventListener("dragstart",l),n.addEventListener("drag",l),window.removeEventListener("resize",r),a.disconnect()}}},be=tt({value:1}),Re=tt(null);function Et(n){let e,t,i,a,l;return{c(){e=B("div"),this.h()},l(s){e=P(s,"DIV",{class:!0,style:!0}),j(e).forEach(H),this.h()},h(){q(e,"class",t="resize-handle "+n[2]+" svelte-ci56im"),L(e,"--size",Ht),L(e,"left",n[5]+"px"),L(e,"top",n[4]+"px"),L(e,"cursor",n[6])},m(s,r){A(s,e,r),n[20](e),a||(l=pe(i=nt.call(null,e,{Extras:n[2],onDragStart:{x:n[0],y:n[1]},onDragMove:n[7],onDragEnd:n[8]})),a=!0)},p(s,[r]){r&4&&t!==(t="resize-handle "+s[2]+" svelte-ci56im")&&q(e,"class",t),r&32&&L(e,"left",s[5]+"px"),r&16&&L(e,"top",s[4]+"px"),i&&Ye(i.update)&&r&7&&i.update.call(null,{Extras:s[2],onDragStart:{x:s[0],y:s[1]},onDragMove:s[7],onDragEnd:s[8]})},i:_e,o:_e,d(s){s&&H(e),n[20](null),a=!1,l()}}}let Ht="1em";function Ct(n,e,t){let i,a,l;Ce(n,be,p=>t(23,l=p));let{x:s}=e,{y:r}=e,{width:o}=e,{height:f}=e,{name:c}=e;console.log(c,{height:f});let{maxFrameHeight:w=2500}=e,{maxFrameWidth:E=2500}=e,{minFrameHeight:_=40}=e,{minFrameWidth:g=40}=e,{arenaWidth:y}=e,{arenaHeight:k}=e,{direction:z}=e,{isDragging:I=!1}=e,{grid:X}=e,D,M=8,h=8;We(()=>{M=D?parseFloat(getComputedStyle(D).width.replace("px","")):8,h=D?parseFloat(getComputedStyle(D).height.replace("px","")):8});let m=z=="nw"||z=="se"?"nwse-resize":z=="n"||z=="s"?"ns-resize":z=="ne"||z=="sw"?"nesw-resize":"ew-resize";function v(p,S,T){switch(p){case"nw":case"w":case"sw":return S-M;case"n":case"s":return S+T/2;case"ne":case"e":case"se":return S+T+M}}function F(p,S,T){switch(p){case"nw":case"n":case"ne":return S-h;case"e":case"w":return S+T/2-h/2;case"sw":case"s":case"se":return S+T+h/2}}function W(p,S,T,d,R){switch(R){case"nw":case"w":case"sw":t(0,s=Math.max(0,s+o-E,Math.min(s+o-g,y,s+T/l.value))),t(9,o=o-T/l.value);break;case"ne":case"e":case"se":t(9,o=Math.max(0,s+g,Math.min(s+E,y,s+o+T/l.value))-s)}switch(R){case"nw":case"n":case"ne":t(1,r=Math.max(0,r+f-w,Math.min(r+f-_,k,r+d/l.value))),t(10,f=f-d/l.value);break;case"sw":case"s":case"se":t(10,f=Math.max(0,r+_,Math.min(r+w,k,r+f+d/l.value))-r)}}function u(p,S,T,d,R){t(11,I=!1),X&&(t(0,s=Math.floor(s/X)*X),t(1,r=Math.floor(r/X)*X),t(9,o=Math.floor(o/X)*X),t(10,f=Math.floor(f/X)*X))}function b(p){O[p?"unshift":"push"](()=>{D=p,t(3,D)})}return n.$$set=p=>{"x"in p&&t(0,s=p.x),"y"in p&&t(1,r=p.y),"width"in p&&t(9,o=p.width),"height"in p&&t(10,f=p.height),"name"in p&&t(12,c=p.name),"maxFrameHeight"in p&&t(13,w=p.maxFrameHeight),"maxFrameWidth"in p&&t(14,E=p.maxFrameWidth),"minFrameHeight"in p&&t(15,_=p.minFrameHeight),"minFrameWidth"in p&&t(16,g=p.minFrameWidth),"arenaWidth"in p&&t(17,y=p.arenaWidth),"arenaHeight"in p&&t(18,k=p.arenaHeight),"direction"in p&&t(2,z=p.direction),"isDragging"in p&&t(11,I=p.isDragging),"grid"in p&&t(19,X=p.grid)},n.$$.update=()=>{n.$$.dirty&517&&t(5,i=v(z,s,o)),n.$$.dirty&1030&&t(4,a=F(z,r,f))},[s,r,z,D,a,i,m,W,u,o,f,I,c,w,E,_,g,y,k,X,b]}class zt extends he{constructor(e){super();ue(this,e,Ct,Et,de,{x:0,y:1,width:9,height:10,name:12,maxFrameHeight:13,maxFrameWidth:14,minFrameHeight:15,minFrameWidth:16,arenaWidth:17,arenaHeight:18,direction:2,isDragging:11,grid:19})}}function Xe(n,{enabled:e,handleUnselect:t}){const i=({target:l})=>{n!==l&&t()};function a({enabled:l}){l?window.addEventListener("click",i):window.removeEventListener("click",i)}return a({enabled:e}),{update:a,destroy(){window.removeEventListener("click",i)}}}function Wt(n){let e,t,i,a;return{c(){e=B("div"),this.h()},l(l){e=P(l,"DIV",{class:!0});var s=j(e);s.forEach(H),this.h()},h(){q(e,"class",t=qe(n[0])+" svelte-1708iua")},m(l,s){A(l,e,s),e.innerHTML=n[4],n[14](e),i||(a=[G(e,"input",n[5]),G(e,"dblclick",n[5])],i=!0)},p(l,s){s&16&&(e.innerHTML=l[4]),s&1&&t!==(t=qe(l[0])+" svelte-1708iua")&&q(e,"class",t)},d(l){l&&H(e),n[14](null),i=!1,ke(a)}}}function Lt(n){let e,t,i,a;return{c(){e=B("span"),t=ie(n[4]),this.h()},l(l){e=P(l,"SPAN",{contenteditable:!0,class:!0});var s=j(e);t=le(s,n[4]),s.forEach(H),this.h()},h(){q(e,"contenteditable",""),q(e,"class",n[0]),n[4]===void 0&&Le(()=>n[13].call(e))},m(l,s){A(l,e,s),N(e,t),n[12](e),n[4]!==void 0&&(e.innerHTML=n[4]),i||(a=[G(e,"keydown",n[6]),G(e,"blur",n[7]),G(e,"input",n[13])],i=!0)},p(l,s){s&16&&He(t,l[4]),s&1&&q(e,"class",l[0]),s&16&&l[4]!==e.innerHTML&&(e.innerHTML=l[4])},d(l){l&&H(e),n[12](null),i=!1,ke(a)}}}function Ft(n){let e,t;function i(s,r){return s[2]?Lt:Wt}let a=i(n),l=a(n);return{c(){e=B("div"),l.c(),this.h()},l(s){e=P(s,"DIV",{class:!0});var r=j(e);l.l(r),r.forEach(H),this.h()},h(){q(e,"class","svelte-1708iua"),Le(()=>n[15].call(e))},m(s,r){A(s,e,r),l.m(e,null),t=Te(e,n[15].bind(e))},p(s,[r]){a===(a=i(s))&&l?l.p(s,r):(l.d(1),l=a(s),l&&(l.c(),l.m(e,null)))},i:_e,o:_e,d(s){s&&H(e),l.d(),t()}}}function Yt(n,e,t){let{value:i=""}=e,{type:a="text"}=e,{placeholder:l=""}=e,{labelClasses:s=""}=e,{inputClasses:r=""}=e,o,f=!1,c,w=i;const E=it();async function _(D){if(t(2,f=!f),f){console.log("toggle editing"),await dt(),c.focus();let h=document.createRange();console.log({inputEl:c}),h.setStart(c.firstChild,0),h.setEnd(c.firstChild,c.firstChild.length);var M=window.getSelection();M.removeAllRanges(),M.addRange(h)}else t(8,i=w),E("doneEditing")}const g=D=>{console.log("checking keyup"),D.keyCode===13&&(D.preventDefault(),c.blur())},y=D=>{i!=""&&i!=null?_():t(8,i="Enter Value")};function k(D){O[D?"unshift":"push"](()=>{c=D,t(3,c)})}function z(){w=this.innerHTML,t(4,w)}function I(D){O[D?"unshift":"push"](()=>{c=D,t(3,c)})}function X(){o=this.offsetWidth,t(1,o)}return n.$$set=D=>{"value"in D&&t(8,i=D.value),"type"in D&&t(9,a=D.type),"placeholder"in D&&t(10,l=D.placeholder),"labelClasses"in D&&t(0,s=D.labelClasses),"inputClasses"in D&&t(11,r=D.inputClasses)},[s,o,f,c,w,_,g,y,i,a,l,r,k,z,I,X]}class Xt extends he{constructor(e){super();ue(this,e,Yt,Ft,de,{value:8,type:9,placeholder:10,labelClasses:0,inputClasses:11})}}const ne=["#63B75A4B","#FEE9004B","#ff003b4b","#69f5dc4B","#FF9D484B","#7a00ff4B","#ff14f84b","#376bff4b"];function Be(n,e,t){const i=n.slice();return i[2]=e[t],i}function Tt(n){let e,t=ne,i=[];for(let a=0;a<t.length;a+=1)i[a]=Pe(Be(n,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=J()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);e=J()},m(a,l){for(let s=0;s<i.length;s+=1)i[s].m(a,l);A(a,e,l)},p(a,l){if(l&1){t=ne;let s;for(s=0;s<t.length;s+=1){const r=Be(a,t,s);i[s]?i[s].p(r,l):(i[s]=Pe(r),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},d(a){Se(i,a),a&&H(e)}}}function Pe(n){let e,t,i;function a(...l){return n[1](n[2],...l)}return{c(){e=B("div"),this.h()},l(l){e=P(l,"DIV",{class:!0,style:!0}),j(e).forEach(H),this.h()},h(){q(e,"class","colorOption svelte-10ineey"),L(e,"background-color",n[2])},m(l,s){A(l,e,s),t||(i=G(e,"click",ze(a)),t=!0)},p(l,s){n=l},d(l){l&&H(e),t=!1,i()}}}function St(n){let e,t=ne&&Tt(n);return{c(){e=B("main"),t&&t.c(),this.h()},l(i){e=P(i,"MAIN",{class:!0});var a=j(e);t&&t.l(a),a.forEach(H),this.h()},h(){q(e,"class","svelte-10ineey")},m(i,a){A(i,e,a),t&&t.m(e,null)},p(i,[a]){ne&&t.p(i,a)},i:_e,o:_e,d(i){i&&H(e),t&&t.d()}}}function Vt(n,e,t){let{backgroundColor:i}=e;const a=(l,s)=>t(0,i=l);return n.$$set=l=>{"backgroundColor"in l&&t(0,i=l.backgroundColor)},[i,a]}class Nt extends he{constructor(e){super();ue(this,e,Vt,St,de,{backgroundColor:0})}}function qt(n){let e,t,i,a,l,s,r,o,f,c,w,E;function _(y){n[2](y)}let g={};return n[1]!==void 0&&(g.backgroundColor=n[1]),t=new Nt({props:g}),O.push(()=>x(t,"backgroundColor",_)),{c(){e=B("div"),K(t.$$.fragment),a=re(),l=B("span"),s=ie("\u21AA"),r=re(),o=B("span"),f=ie("\u{1F5D1}\uFE0F"),this.h()},l(y){e=P(y,"DIV",{style:!0,class:!0});var k=j(e);se(t.$$.fragment,k),a=oe(k),l=P(k,"SPAN",{class:!0});var z=j(l);s=le(z,"\u21AA"),z.forEach(H),r=oe(k),o=P(k,"SPAN",{class:!0});var I=j(o);f=le(I,"\u{1F5D1}\uFE0F"),I.forEach(H),k.forEach(H),this.h()},h(){q(l,"class","connect svelte-sbpf1i"),q(o,"class","svelte-sbpf1i"),L(e,"left",n[0].x+n[0].style.width+"px"),L(e,"top",n[0].y+"px"),q(e,"class","svelte-sbpf1i")},m(y,k){A(y,e,k),Q(t,e,null),N(e,a),N(e,l),N(l,s),N(e,r),N(e,o),N(o,f),c=!0,w||(E=[G(l,"click",ze(It)),G(o,"click",ze(At))],w=!0)},p(y,[k]){const z={};!i&&k&2&&(i=!0,z.backgroundColor=y[1],U(()=>i=!1)),t.$set(z),(!c||k&1)&&L(e,"left",y[0].x+y[0].style.width+"px"),(!c||k&1)&&L(e,"top",y[0].y+"px")},i(y){c||(C(t.$$.fragment,y),c=!0)},o(y){Y(t.$$.fragment,y),c=!1},d(y){y&&H(e),$(t),w=!1,ke(E)}}}function At(n){}function It(n){}function Ot(n,e,t){var s;let{node:i}=e,a=((s=i==null?void 0:i.style)==null?void 0:s.backgroundColor)||"#fee9004b";console.log({backgroundColor:a});function l(r){a=r,t(1,a)}return n.$$set=r=>{"node"in r&&t(0,i=r.node)},n.$$.update=()=>{n.$$.dirty&3&&a&&t(0,i=De(Me({},i),{style:De(Me({},i.style),{backgroundColor:a})}))},[i,a,l]}class Rt extends he{constructor(e){super();ue(this,e,Ot,qt,de,{node:0})}}function je(n,e,t){const i=n.slice();return i[30]=e[t],i}function xe(n,e,t){const i=n.slice();return i[33]=e[t],i[34]=e,i[35]=t,i}function Ue(n){var F,W;let e,t,i,a,l,s,r,o,f,c,w,E,_,g,y,k,z;function I(u){n[15](u)}let X={};n[0].name!==void 0&&(X.value=n[0].name),i=new Xt({props:X}),O.push(()=>x(i,"value",I));function D(u){n[16](u)}var M=n[0].component;function h(u){let b={};return u[0].props!==void 0&&(b.props=u[0].props),{props:b}}M&&(s=new M(h(n)),O.push(()=>x(s,"props",D)));let m=((W=(F=n[0])==null?void 0:F.children)==null?void 0:W.length)>0&&Ze(n),v=n[4]&&n[7]&&Je(n);return{c(){e=B("div"),t=B("div"),K(i.$$.fragment),l=re(),s&&K(s.$$.fragment),o=re(),m&&m.c(),_=re(),v&&v.c(),g=J(),this.h()},l(u){e=P(u,"DIV",{class:!0,style:!0});var b=j(e);t=P(b,"DIV",{class:!0});var p=j(t);se(i.$$.fragment,p),p.forEach(H),l=oe(b),s&&se(s.$$.fragment,b),o=oe(b),m&&m.l(b),b.forEach(H),_=oe(u),v&&v.l(u),g=J(),this.h()},h(){var u,b,p,S,T,d;q(t,"class","title svelte-jjqozt"),q(e,"class","container svelte-jjqozt"),L(e,"position","absolute"),L(e,"left",n[0].x+"px"),L(e,"top",n[0].y+"px"),L(e,"width",((b=(u=n[0])==null?void 0:u.style)==null?void 0:b.width)+"px"),L(e,"height",((S=(p=n[0])==null?void 0:p.style)==null?void 0:S.height)+"px"),L(e,"background-color",((d=(T=n[0])==null?void 0:T.style)==null?void 0:d.backgroundColor)||"#fee9004b"),Le(()=>n[20].call(e))},m(u,b){A(u,e,b),N(e,t),Q(i,t,null),N(e,l),s&&Q(s,e,null),N(e,o),m&&m.m(e,null),n[19](e),f=Te(e,n[20].bind(e)),A(u,_,b),v&&v.m(u,b),A(u,g,b),y=!0,k||(z=[pe(c=nt.call(null,e,{onDragStart:{x:n[0].x,y:n[0].y},onDragMove:n[9],onDragEnd:n[10]})),pe(w=gt.call(null,e,{TypesToAccept:{"item/plain":"all"},onDrop:n[11]})),pe(E=Xe.call(null,e,{enabled:n[7],handleUnselect:n[12]})),G(e,"click",ze(n[13])),G(e,"focusout",n[12])],k=!0)},p(u,b){var T,d,R,ge,ee,ve,Fe,ye;const p={};!a&&b[0]&1&&(a=!0,p.value=u[0].name,U(()=>a=!1)),i.$set(p);const S={};if(!r&&b[0]&1&&(r=!0,S.props=u[0].props,U(()=>r=!1)),M!==(M=u[0].component)){if(s){ce();const we=s;Y(we.$$.fragment,1,0,()=>{$(we,1)}),fe()}M?(s=new M(h(u)),O.push(()=>x(s,"props",D)),K(s.$$.fragment),C(s.$$.fragment,1),Q(s,e,o)):s=null}else M&&s.$set(S);((d=(T=u[0])==null?void 0:T.children)==null?void 0:d.length)>0?m?(m.p(u,b),b[0]&1&&C(m,1)):(m=Ze(u),m.c(),C(m,1),m.m(e,null)):m&&(ce(),Y(m,1,1,()=>{m=null}),fe()),(!y||b[0]&1)&&L(e,"left",u[0].x+"px"),(!y||b[0]&1)&&L(e,"top",u[0].y+"px"),(!y||b[0]&1)&&L(e,"width",((ge=(R=u[0])==null?void 0:R.style)==null?void 0:ge.width)+"px"),(!y||b[0]&1)&&L(e,"height",((ve=(ee=u[0])==null?void 0:ee.style)==null?void 0:ve.height)+"px"),(!y||b[0]&1)&&L(e,"background-color",((ye=(Fe=u[0])==null?void 0:Fe.style)==null?void 0:ye.backgroundColor)||"#fee9004b"),c&&Ye(c.update)&&b[0]&1&&c.update.call(null,{onDragStart:{x:u[0].x,y:u[0].y},onDragMove:u[9],onDragEnd:u[10]}),E&&Ye(E.update)&&b[0]&128&&E.update.call(null,{enabled:u[7],handleUnselect:u[12]}),u[4]&&u[7]?v?(v.p(u,b),b[0]&144&&C(v,1)):(v=Je(u),v.c(),C(v,1),v.m(g.parentNode,g)):v&&(ce(),Y(v,1,1,()=>{v=null}),fe())},i(u){y||(C(i.$$.fragment,u),s&&C(s.$$.fragment,u),C(m),C(v),y=!0)},o(u){Y(i.$$.fragment,u),s&&Y(s.$$.fragment,u),Y(m),Y(v),y=!1},d(u){u&&H(e),$(i),s&&$(s),m&&m.d(),n[19](null),f(),u&&H(_),v&&v.d(u),u&&H(g),k=!1,ke(z)}}}function Ze(n){let e,t,i=n[0].children,a=[];for(let s=0;s<i.length;s+=1)a[s]=Ge(xe(n,i,s));const l=s=>Y(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=J()},l(s){for(let r=0;r<a.length;r+=1)a[r].l(s);e=J()},m(s,r){for(let o=0;o<a.length;o+=1)a[o].m(s,r);A(s,e,r),t=!0},p(s,r){if(r[0]&99){i=s[0].children;let o;for(o=0;o<i.length;o+=1){const f=xe(s,i,o);a[o]?(a[o].p(f,r),C(a[o],1)):(a[o]=Ge(f),a[o].c(),C(a[o],1),a[o].m(e.parentNode,e))}for(ce(),o=i.length;o<a.length;o+=1)l(o);fe()}},i(s){if(!t){for(let r=0;r<i.length;r+=1)C(a[r]);t=!0}},o(s){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)Y(a[r]);t=!1},d(s){Se(a,s),s&&H(e)}}}function Ge(n){let e,t,i,a;function l(o){n[17](o,n[33],n[34],n[35])}function s(o){n[18](o)}let r={arenaWidth:n[5],arenaHeight:n[6]};return n[33]!==void 0&&(r.node=n[33]),n[1]!==void 0&&(r.isDragging=n[1]),e=new st({props:r}),O.push(()=>x(e,"node",l)),O.push(()=>x(e,"isDragging",s)),{c(){K(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,f){Q(e,o,f),a=!0},p(o,f){n=o;const c={};f[0]&32&&(c.arenaWidth=n[5]),f[0]&64&&(c.arenaHeight=n[6]),!t&&f[0]&1&&(t=!0,c.node=n[33],U(()=>t=!1)),!i&&f[0]&2&&(i=!0,c.isDragging=n[1],U(()=>i=!1)),e.$set(c)},i(o){a||(C(e.$$.fragment,o),a=!0)},o(o){Y(e.$$.fragment,o),a=!1},d(o){$(e,o)}}}function Je(n){let e,t,i,a,l=n[8],s=[];for(let c=0;c<l.length;c+=1)s[c]=Ke(je(n,l,c));const r=c=>Y(s[c],1,1,()=>{s[c]=null});function o(c){n[26](c)}let f={};return n[0]!==void 0&&(f.node=n[0]),t=new Rt({props:f}),O.push(()=>x(t,"node",o)),{c(){for(let c=0;c<s.length;c+=1)s[c].c();e=re(),K(t.$$.fragment)},l(c){for(let w=0;w<s.length;w+=1)s[w].l(c);e=oe(c),se(t.$$.fragment,c)},m(c,w){for(let E=0;E<s.length;E+=1)s[E].m(c,w);A(c,e,w),Q(t,c,w),a=!0},p(c,w){if(w[0]&271){l=c[8];let _;for(_=0;_<l.length;_+=1){const g=je(c,l,_);s[_]?(s[_].p(g,w),C(s[_],1)):(s[_]=Ke(g),s[_].c(),C(s[_],1),s[_].m(e.parentNode,e))}for(ce(),_=l.length;_<s.length;_+=1)r(_);fe()}const E={};!i&&w[0]&1&&(i=!0,E.node=c[0],U(()=>i=!1)),t.$set(E)},i(c){if(!a){for(let w=0;w<l.length;w+=1)C(s[w]);C(t.$$.fragment,c),a=!0}},o(c){s=s.filter(Boolean);for(let w=0;w<s.length;w+=1)Y(s[w]);Y(t.$$.fragment,c),a=!1},d(c){Se(s,c),c&&H(e),$(t,c)}}}function Ke(n){let e,t,i,a,l,s,r;function o(g){n[21](g)}function f(g){n[22](g)}function c(g){n[23](g)}function w(g){n[24](g)}function E(g){n[25](g)}let _={name:n[0].name,maxFrameWidth:jt,minFrameWidth:Pt,arenaWidth:n[3],arenaHeight:n[2],maxFrameHeight:Ut,minFrameHeight:xt,direction:n[30],grid:ae};return n[0].x!==void 0&&(_.x=n[0].x),n[0].y!==void 0&&(_.y=n[0].y),n[0].style.width!==void 0&&(_.width=n[0].style.width),n[0].style.height!==void 0&&(_.height=n[0].style.height),n[1]!==void 0&&(_.isDragging=n[1]),e=new zt({props:_}),O.push(()=>x(e,"x",o)),O.push(()=>x(e,"y",f)),O.push(()=>x(e,"width",c)),O.push(()=>x(e,"height",w)),O.push(()=>x(e,"isDragging",E)),{c(){K(e.$$.fragment)},l(g){se(e.$$.fragment,g)},m(g,y){Q(e,g,y),r=!0},p(g,y){const k={};y[0]&1&&(k.name=g[0].name),y[0]&8&&(k.arenaWidth=g[3]),y[0]&4&&(k.arenaHeight=g[2]),!t&&y[0]&1&&(t=!0,k.x=g[0].x,U(()=>t=!1)),!i&&y[0]&1&&(i=!0,k.y=g[0].y,U(()=>i=!1)),!a&&y[0]&1&&(a=!0,k.width=g[0].style.width,U(()=>a=!1)),!l&&y[0]&1&&(l=!0,k.height=g[0].style.height,U(()=>l=!1)),!s&&y[0]&2&&(s=!0,k.isDragging=g[1],U(()=>s=!1)),e.$set(k)},i(g){r||(C(e.$$.fragment,g),r=!0)},o(g){Y(e.$$.fragment,g),r=!1},d(g){$(e,g)}}}function Bt(n){let e,t,i,a=n[0]&&document&&Xe&&Ue(n);return{c(){e=re(),a&&a.c(),t=J()},l(l){e=oe(l),a&&a.l(l),t=J()},m(l,s){A(l,e,s),a&&a.m(l,s),A(l,t,s),i=!0},p(l,s){l[0]&&document&&Xe?a?(a.p(l,s),s[0]&1&&C(a,1)):(a=Ue(l),a.c(),C(a,1),a.m(t.parentNode,t)):a&&(ce(),Y(a,1,1,()=>{a=null}),fe())},i(l){i||(C(a),i=!0)},o(l){Y(a),i=!1},d(l){l&&H(e),a&&a.d(l),l&&H(t)}}}let ae=20,Pt=40,jt=2500,xt=20,Ut=2500;function Zt(n,e,t){let i,a;Ce(n,Re,d=>t(14,i=d)),Ce(n,be,d=>t(27,a=d)),We(async()=>{mt(()=>import("../chunks/svelte-drag-drop-touch.esm-bd0b41cd.js"),[])});let{node:l}=e,{arenaHeight:s}=e,{arenaWidth:r}=e,{isDragging:o=!1}=e;it();let f,c,w,E,_=["nw","w","sw","ne","e","se","n","s"];function g(d,R,ge,ee){t(0,l.x=l.x+ge/a.value,l),t(0,l.y=l.y+ee/a.value,l),z()}function y(d,R,ge,ee,ve){t(1,o=!1),t(0,l.x=Math.round(l.x/ae)*ae,l),t(0,l.y=Math.round(l.y/ae)*ae,l),t(0,l.style.width=Math.round(l.style.width/ae)*ae,l),t(0,l.style.height=Math.round(l.style.height/ae)*ae,l)}function k(d,R,ge,ee,ve,Fe){let ye;for(let we in ee)ee.hasOwnProperty(we)&&(ye=we);return t(0,l.children=[...l.children,De(Me({},ve.newContainer),{x:d/a.value,y:R/a.value})],l),ye}function z(){l.x<0&&t(0,l.x=0,l),l.x+l.style.width>=r&&t(0,l.x-=l.x+l.style.width-r,l),l.y<0&&t(0,l.y=0,l),l.y+l.style.height>=s&&t(0,l.y-=l.y+l.style.height-s,l)}function I(){t(7,E=!1)}function X(d){f.focus(),lt(Re,i=f,i),t(7,E=!0)}function D(d){n.$$.not_equal(l.name,d)&&(l.name=d,t(0,l))}function M(d){n.$$.not_equal(l.props,d)&&(l.props=d,t(0,l))}function h(d,R,ge,ee){ge[ee]=d,t(0,l)}function m(d){o=d,t(1,o)}function v(d){O[d?"unshift":"push"](()=>{f=d,t(4,f)})}function F(){c=this.clientWidth,w=this.clientHeight,t(5,c),t(6,w)}function W(d){n.$$.not_equal(l.x,d)&&(l.x=d,t(0,l))}function u(d){n.$$.not_equal(l.y,d)&&(l.y=d,t(0,l))}function b(d){n.$$.not_equal(l.style.width,d)&&(l.style.width=d,t(0,l))}function p(d){n.$$.not_equal(l.style.height,d)&&(l.style.height=d,t(0,l))}function S(d){o=d,t(1,o)}function T(d){l=d,t(0,l)}return n.$$set=d=>{"node"in d&&t(0,l=d.node),"arenaHeight"in d&&t(2,s=d.arenaHeight),"arenaWidth"in d&&t(3,r=d.arenaWidth),"isDragging"in d&&t(1,o=d.isDragging)},n.$$.update=()=>{n.$$.dirty[0]&12&&(r||s)&&z(),n.$$.dirty[0]&16400&&i!=f&&I()},[l,o,s,r,f,c,w,E,_,g,y,k,I,X,i,D,M,h,m,v,F,W,u,b,p,S,T]}class st extends he{constructor(e){super();ue(this,e,Zt,Bt,de,{node:0,arenaHeight:2,arenaWidth:3,isDragging:1},null,[-1,-1])}}function Qe(n){let e,t,i,a,l,s,r,o,f,c,w,E,_,g,y,k;function z(M){n[7](M)}let I={};n[5].value!==void 0&&(I.scale=n[5].value),t=new wt({props:I}),O.push(()=>x(t,"scale",z));function X(M){n[8](M)}let D={arenaWidth:n[3]*100,arenaHeight:n[4]*100};return n[0]!==void 0&&(D.node=n[0]),c=new st({props:D}),O.push(()=>x(c,"node",X)),{c(){e=B("div"),K(t.$$.fragment),a=re(),l=ie(n[1]),s=ie("px x "),r=ie(n[2]),o=ie(`px\r
\r
		`),f=B("div"),K(c.$$.fragment),this.h()},l(M){e=P(M,"DIV",{class:!0,style:!0});var h=j(e);se(t.$$.fragment,h),a=oe(h),l=le(h,n[1]),s=le(h,"px x "),r=le(h,n[2]),o=le(h,`px\r
\r
		`),f=P(h,"DIV",{class:!0});var m=j(f);se(c.$$.fragment,m),m.forEach(H),h.forEach(H),this.h()},h(){q(f,"class","zoomable flexbox svelte-4dy2ei"),q(e,"class","canvas svelte-4dy2ei"),L(e,"height",n[2]+"px"),L(e,"width",n[1]+"px"),Le(()=>n[9].call(e))},m(M,h){A(M,e,h),Q(t,e,null),N(e,a),N(e,l),N(e,s),N(e,r),N(e,o),N(e,f),Q(c,f,null),_=Te(e,n[9].bind(e)),g=!0,y||(k=[pe(E=Dt.call(null,f)),G(f,"zoomed",n[6])],y=!0)},p(M,h){const m={};!i&&h&32&&(i=!0,m.scale=M[5].value,U(()=>i=!1)),t.$set(m),(!g||h&2)&&He(l,M[1]),(!g||h&4)&&He(r,M[2]);const v={};h&8&&(v.arenaWidth=M[3]*100),h&16&&(v.arenaHeight=M[4]*100),!w&&h&1&&(w=!0,v.node=M[0],U(()=>w=!1)),c.$set(v),(!g||h&4)&&L(e,"height",M[2]+"px"),(!g||h&2)&&L(e,"width",M[1]+"px")},i(M){g||(C(t.$$.fragment,M),C(c.$$.fragment,M),g=!0)},o(M){Y(t.$$.fragment,M),Y(c.$$.fragment,M),g=!1},d(M){M&&H(e),$(t),$(c),_(),y=!1,ke(k)}}}function Gt(n){let e,t,i=n[5]&&Qe(n);return{c(){i&&i.c(),e=J()},l(a){i&&i.l(a),e=J()},m(a,l){i&&i.m(a,l),A(a,e,l),t=!0},p(a,[l]){a[5]?i?(i.p(a,l),l&32&&C(i,1)):(i=Qe(a),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(ce(),Y(i,1,1,()=>{i=null}),fe())},i(a){t||(C(i),t=!0)},o(a){Y(i),t=!1},d(a){i&&i.d(a),a&&H(e)}}}function Jt(n,e,t){let i;Ce(n,be,_=>t(5,i=_));let{data:a}=e,{width:l=400}=e,{height:s=600}=e,r,o;function f(_){lt(be,i=_.detail.scale,i)}function c(_){n.$$.not_equal(i.value,_)&&(i.value=_,be.set(i))}function w(_){a=_,t(0,a)}function E(){r=this.clientWidth,o=this.clientHeight,t(3,r),t(4,o)}return n.$$set=_=>{"data"in _&&t(0,a=_.data),"width"in _&&t(1,l=_.width),"height"in _&&t(2,s=_.height)},[a,l,s,r,o,i,f,c,w,E]}class Kt extends he{constructor(e){super();ue(this,e,Jt,Gt,de,{data:0,width:1,height:2})}}const{window:Qt}=_t;function $e(n){let e,t,i;function a(s){n[5](s)}let l={width:n[0],height:n[1]};return n[2]!==void 0&&(l.data=n[2]),e=new Kt({props:l}),O.push(()=>x(e,"data",a)),{c(){K(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){Q(e,s,r),i=!0},p(s,r){const o={};r&1&&(o.width=s[0]),r&2&&(o.height=s[1]),!t&&r&4&&(t=!0,o.data=s[2],U(()=>t=!1)),e.$set(o)},i(s){i||(C(e.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),i=!1},d(s){$(e,s)}}}function $t(n){let e,t,i,a,l=n[3]&&$e(n);return{c(){e=B("div"),l&&l.c(),this.h()},l(s){e=P(s,"DIV",{class:!0,style:!0});var r=j(e);l&&l.l(r),r.forEach(H),this.h()},h(){q(e,"class","app svelte-16vwtwf"),L(e,"--vh",n[3]+"px"),L(e,"height","calc(var(--vh, 1vh) * 100)")},m(s,r){A(s,e,r),l&&l.m(e,null),t=!0,i||(a=G(Qt,"resize",n[4]),i=!0)},p(s,[r]){s[3]?l?(l.p(s,r),r&8&&C(l,1)):(l=$e(s),l.c(),C(l,1),l.m(e,null)):l&&(ce(),Y(l,1,1,()=>{l=null}),fe()),(!t||r&8)&&L(e,"--vh",s[3]+"px")},i(s){t||(C(l),t=!0)},o(s){Y(l),t=!1},d(s){s&&H(e),l&&l.d(),i=!1,a()}}}function en(n,e,t){let i,a;function l(){return Math.floor(Math.random()*10%ne.length)}let s={name:"My Dashboard of Lists",id:me(),x:20,y:20,style:{backgroundColor:ne[l()],width:600,left:20,top:20,height:800},children:[{name:"Child 1",id:me(),x:60,y:80,style:{backgroundColor:ne[l()],width:220,height:520,left:20,top:20},props:[],children:[{name:"Child A",id:me(),x:20,y:80,style:{backgroundColor:ne[l()],width:120,height:120,left:20,top:20},props:[],children:[]}]},{name:"Child 2",id:me(),x:300,y:80,style:{backgroundColor:ne[l()],width:100,height:140,left:20,top:20},props:[],children:[]},{name:"Child 3",id:me(),x:420,y:80,style:{backgroundColor:ne[l()],width:100,height:160,left:20,top:20},props:[],children:[]}]},r;We(()=>{o()});function o(c){t(3,r=window.innerHeight*.01),t(1,a=window.innerHeight),t(0,i=document==null?void 0:document.body.clientWidth)}function f(c){s=c,t(2,s)}return[i,a,s,r,o,f]}class tn extends he{constructor(e){super();ue(this,e,en,$t,de,{})}}function et(n){let e,t;return e=new tn({}),{c(){K(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,a){Q(e,i,a),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){$(e,i)}}}function nn(n){let e,t,i=n[0]&&et();return{c(){i&&i.c(),e=J()},l(a){i&&i.l(a),e=J()},m(a,l){i&&i.m(a,l),A(a,e,l),t=!0},p(a,[l]){a[0]?i?l&1&&C(i,1):(i=et(),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(ce(),Y(i,1,1,()=>{i=null}),fe())},i(a){t||(C(i),t=!0)},o(a){Y(i),t=!1},d(a){i&&i.d(a),a&&H(e)}}}function ln(n,e,t){let i;return We(()=>{t(0,i=!0)}),[i]}class on extends he{constructor(e){super();ue(this,e,ln,nn,de,{})}}export{on as default};
